(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[75],{816:function(e,t,n){"use strict";var s=n(29),a=n(179),i=n(1),u=(n(0),n(99)),c=n(1790),o=n(614),l=n(1792),r=n(1656),m=n.n(r),b=n(22),d=n(851),p=n(781),j=n(109);t.a=function(e){var t=Object(b.i)("problem_judge_settings"),n={className:m.a.fileSelect+" "+("ItemSearchDropdown"===e.type?m.a.itemSearchDropdown:m.a.formSelect)+(e.className?" "+e.className:""),label:e.label,text:e.value&&!e.testData.some((function(t){return t.filename===e.value}))?Object(i.jsxs)(i.Fragment,{children:[e.iconInputOrOutput&&Object(i.jsx)(u.a,{className:m.a.iconInputOrOutput,name:e.iconInputOrOutput}),Object(i.jsx)(c.a,{trigger:Object(i.jsx)(u.a,{name:"warning sign",className:m.a.iconFile}),content:t(".file_selector.file_not_found_warning"),position:"top center"}),Object(i.jsx)(j.a,{children:Object(i.jsx)("span",{children:e.value})})]}):void 0,placeholder:e.placeholder,value:e.value,options:[].concat(Object(a.a)(e.optional?[{key:null,value:null,text:Object(i.jsxs)(i.Fragment,{children:[e.iconInputOrOutput&&Object(i.jsx)(u.a,{className:m.a.iconInputOrOutput+" "+m.a.invisible,name:e.iconInputOrOutput}),Object(i.jsx)(u.a,{name:"file code outline",className:m.a.iconFile+" "+m.a.invisible}),Object(i.jsx)("div",{className:m.a.filename,children:"‎"+t(".file_selector.empty")})]})}]:[]),Object(a.a)(e.testData.map((function(t){return{key:t.filename,value:t.filename,text:Object(i.jsxs)(i.Fragment,{children:[e.iconInputOrOutput&&Object(i.jsx)(u.a,{className:m.a.iconInputOrOutput,name:e.iconInputOrOutput}),Object(i.jsx)(u.a,{name:Object(d.a)(t.filename),className:m.a.iconFile}),Object(i.jsx)(j.a,{children:Object(i.jsx)("div",{className:m.a.filename,children:"‎"+t.filename})}),Object(i.jsx)("div",{className:m.a.fileSize,children:Object(p.a)(t.size,1)})]})}})))),onChange:function(t,n){var s=n.value;return e.onChange(s)}};return"ItemSearchDropdown"===e.type?Object(i.jsx)(o.a,Object(s.a)({item:!0,selection:!0,search:!0,noResultsMessage:t(".file_selector.no_matching_files")},n)):Object(i.jsx)(l.a.Select,Object(s.a)({open:0!==e.testData.length&&void 0},n))}},906:function(e,t,n){"use strict";var s=n(1),a=(n(0),n(1792)),i=n(1725),u=n(55),c=n(1654),o=n.n(c),l=n(22),r=function(e){var t=Object(l.i)("problem_judge_settings"),n=e.judgeInfo;return Object(s.jsx)("div",{children:Object(s.jsxs)(a.a,{children:[e.options.enableTimeMemoryLimit&&Object(s.jsxs)(a.a.Group,{children:[Object(s.jsxs)(a.a.Field,{width:8,children:[Object(s.jsx)("label",{children:t(".meta.time_limit")}),Object(s.jsx)(i.a,{className:o.a.labeledInput,value:null==n.timeLimit?"":n.timeLimit,label:"ms",labelPosition:"right",icon:"clock",iconPosition:"left",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0)&&e.onUpdateJudgeInfo({timeLimit:""===s?null:Number(s)})}})]}),Object(s.jsxs)(a.a.Field,{width:8,children:[Object(s.jsx)("label",{children:t(".meta.memory_limit")}),Object(s.jsx)(i.a,{className:o.a.labeledInput,value:null==n.memoryLimit?"":n.memoryLimit,label:"MiB",labelPosition:"right",icon:"microchip",iconPosition:"left",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0)&&e.onUpdateJudgeInfo({memoryLimit:""===s?null:Number(s)})}})]})]}),e.options.enableFileIo&&n.fileIo&&Object(s.jsxs)(a.a.Group,{children:[Object(s.jsxs)(a.a.Field,{width:8,children:[Object(s.jsx)("label",{children:t(".meta.input_file")}),Object(s.jsx)(i.a,{value:n.fileIo.inputFilename,readOnly:!n.fileIo,icon:"sign in",iconPosition:"left",onChange:function(t,s){var a=s.value;return e.onUpdateJudgeInfo({fileIo:{inputFilename:a,outputFilename:n.fileIo.outputFilename}})}})]}),Object(s.jsxs)(a.a.Field,{width:8,children:[Object(s.jsx)("label",{children:t(".meta.output_file")}),Object(s.jsx)(i.a,{value:n.fileIo.outputFilename,readOnly:!n.fileIo,icon:"sign out",iconPosition:"left",onChange:function(t,s){var a=s.value;return e.onUpdateJudgeInfo({fileIo:{inputFilename:n.fileIo.inputFilename,outputFilename:a}})}})]})]}),(e.options.enableFileIo||e.options.enableRunSamples)&&Object(s.jsxs)(a.a.Group,{children:[e.options.enableFileIo&&Object(s.jsx)(a.a.Checkbox,{className:o.a.checkbox,width:8,label:t(".meta.use_standard_io"),checked:!n.fileIo,onChange:function(t,n){var s=n.checked;return e.onUpdateJudgeInfo({fileIo:s?null:{inputFilename:"",outputFilename:""}})}}),e.options.enableRunSamples&&Object(s.jsx)(a.a.Checkbox,{className:o.a.checkbox,width:8,label:t(".meta.run_samples"),checked:n.runSamples,onChange:function(t,n){var s=n.checked;return e.onUpdateJudgeInfo({runSamples:s})}})]})]})})};r=Object(u.a)(r);var m={parseJudgeInfo:function(e,t,n){return{timeLimit:n.enableTimeMemoryLimit&&Number.isSafeInteger(e.timeLimit)?e.timeLimit:null,memoryLimit:n.enableTimeMemoryLimit&&Number.isSafeInteger(e.memoryLimit)?e.memoryLimit:null,fileIo:n.enableFileIo&&e.fileIo&&"string"===typeof e.fileIo.inputFilename&&"string"===typeof e.fileIo.outputFilename?{inputFilename:e.fileIo.inputFilename,outputFilename:e.fileIo.outputFilename}:null,runSamples:n.enableRunSamples?!!e.runSamples:null}},normalizeJudgeInfo:function(e,t){t.enableTimeMemoryLimit||(delete e.timeLimit,delete e.memoryLimit),e.runSamples||delete e.runSamples,e.fileIo||delete e.fileIo}};t.a=Object.assign(r,m)},915:function(e,t,n){"use strict";var s,a=n(622),i=n(80),u=n(179),c=n(19),o=n(1),l=n(0),r=n.n(l),m=n(601),b=n(1725),d=n(614),p=n(593),j=n(1790),f=n(618),O=n(1803),h=n(1792),g=n(617),x=n(1795),k=n(55),v=n(1799),_=n(758),I=n.n(_),F=n(1655),y=n.n(F),N=n(22),L=n(816);function T(e){for(var t=e.split("-").join(""),n=0,s=0;s<t.length;s+=4)n^=parseInt(t.substr(s,4),16);return n%11}!function(e){e.Sum="Sum",e.GroupMin="GroupMin",e.GroupMul="GroupMul"}(s||(s={}));var C=function(e){var t=Object(N.i)("problem_judge_settings"),n=Object(l.useState)(null),s=Object(c.a)(n,2),a=s[0],i=s[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(m.a,{className:y.a.menu+" "+y.a.menuTestcase+" "+y.a.menuTestcaseFirstLine+" "+y.a["color_"+T(e.testcase.uuid)],attached:!0,children:[Object(o.jsxs)(m.a.Item,{className:y.a.itemTestcaseTitle,children:["#",e.testcaseIndex+1]}),e.options.enableInputFile?Object(o.jsx)(L.a,{type:"ItemSearchDropdown",iconInputOrOutput:"sign in",testData:e.testData,placeholder:t(".subtasks.testcase.input_file"),optional:"optional"===e.options.enableInputFile,value:e.testcase.inputFile,onChange:function(t){return e.onUpdate({inputFile:t})}}):Object(o.jsx)(m.a.Item,{className:y.a.outputFileNotNeeded,content:t(".subtasks.testcase.input_file_not_needed")}),Object(o.jsxs)(m.a.Menu,{position:"right",children:[e.options.enableUserOutputFilename&&Object(o.jsx)(m.a.Item,{className:y.a.itemTestcaseUserOutputFilename}),e.options.enableTimeMemoryLimit&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(m.a.Item,{className:y.a.itemTestcaseTimeLimit,children:Object(o.jsx)(b.a,{transparent:!0,placeholder:e.defaultTimeLimit,value:null==e.testcase.timeLimit?"":e.testcase.timeLimit,icon:"clock",iconPosition:"left",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0)&&e.onUpdate({timeLimit:""===s?null:Number(s)})}})}),Object(o.jsx)(m.a.Item,{className:y.a.itemLabel,children:"ms"})]}),Object(o.jsx)(d.a,{item:!0,icon:"plus",className:"icon ".concat(y.a.itemWithIcon),children:Object(o.jsxs)(d.a.Menu,{children:[Object(o.jsx)(d.a.Item,{icon:"angle double up",text:t(".subtasks.testcase_add.before"),onClick:function(){return e.onAddTestcaseBefore()}}),Object(o.jsx)(d.a.Item,{icon:"angle double down",text:t(".subtasks.testcase_add.after"),onClick:function(){return e.onAddTestcaseAfter()}})]})})]})]}),Object(o.jsxs)(m.a,{className:y.a.menu+" "+y.a.menuTestcase+" "+y.a.menuTestcaseSecondLine+" "+y.a["color_"+T(e.testcase.uuid)],attached:!0,children:[Object(o.jsx)(m.a.Item,{className:y.a.itemTestcaseScore,children:Object(o.jsx)(b.a,{transparent:!0,placeholder:e.defaultPercentagePoints,value:null==e.testcase.points?"":e.testcase.points,disabled:1===e.testcaseCount,icon:"percent",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0&&Number(s)<=100)&&e.onUpdate({points:""===s?null:Number(s)})}})}),e.options.enableOutputFile?Object(o.jsx)(L.a,{type:"ItemSearchDropdown",iconInputOrOutput:"sign out",testData:e.testData,placeholder:t(".subtasks.testcase.output_file"),optional:"optional"===e.options.enableOutputFile,value:e.testcase.outputFile,onChange:function(t){return e.onUpdate({outputFile:t})}}):Object(o.jsx)(m.a.Item,{className:y.a.outputFileNotNeeded,content:t(".subtasks.testcase.output_file_not_needed")}),Object(o.jsxs)(m.a.Menu,{position:"right",children:[e.options.enableUserOutputFilename&&Object(o.jsx)(m.a.Item,{className:y.a.itemTestcaseUserOutputFilename,children:Object(o.jsx)(b.a,{transparent:!0,placeholder:e.testcase.outputFile||t(".subtasks.testcase.user_output_filename"),value:null==e.testcase.userOutputFilename?"":e.testcase.userOutputFilename,icon:"file upload",iconPosition:"left",onChange:function(t,n){var s=n.value;return e.onUpdate({userOutputFilename:""===s?null:s})}})}),e.options.enableTimeMemoryLimit&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(m.a.Item,{className:y.a.itemTestcaseMemoryLimit,children:Object(o.jsx)(b.a,{transparent:!0,placeholder:e.defaultMemoryLimit,value:null==e.testcase.memoryLimit?"":e.testcase.memoryLimit,icon:"microchip",iconPosition:"left",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0)&&e.onUpdate({memoryLimit:""===s?null:Number(s)})}})}),Object(o.jsx)(m.a.Item,{className:y.a.itemLabel,children:"MiB"})]}),Object(o.jsx)(p.a,{innerRef:i,children:Object(o.jsx)(d.a,{item:!0,icon:"bars",className:"icon ".concat(y.a.itemWithIcon),children:Object(o.jsxs)(d.a.Menu,{children:[Object(o.jsx)(d.a.Item,{icon:"angle double up",text:t(".subtasks.testcase_options.move_up"),onClick:function(){return e.onMoveUp()},disabled:0===e.testcaseIndex}),Object(o.jsx)(d.a.Item,{icon:"angle double down",text:t(".subtasks.testcase_options.move_down"),onClick:function(){return e.onMoveDown()},disabled:e.testcaseIndex===e.testcaseCount-1}),Object(o.jsx)(j.a,{trigger:Object(o.jsx)(d.a.Item,{icon:"delete",text:t(".subtasks.testcase_options.delete")}),context:a,content:Object(o.jsx)(f.a,{negative:!0,content:t(".subtasks.testcase_options.confirm_delete"),onClick:function(){return e.onDelete()}}),on:"click",position:"bottom center"})]})})})]})]})]})};C=Object(k.a)(C);var S=function(e){var t=Object(N.i)("problem_judge_settings"),n=Object(l.useState)(1===e.subtaskCount),a=Object(c.a)(n,2),i=a[0],k=a[1],_=Object(l.useRef)(null),I=e.subtask.testcases.map((function(e){return e.points})).filter((function(e){return null!=e})).reduce((function(e,t){return e+t}),0),F=e.subtask.testcases.filter((function(e){return null==e.points})).length,L=(I>100?0:Math.round((100-I)/F))||0,S=Object(l.useState)(""),M=Object(c.a)(S,2),U=M[0],w=M[1],D=Object(l.useState)(""),A=Object(c.a)(D,2),P=A[0],$=A[1],W=Object(l.useState)(""),J=Object(c.a)(W,2),R=J[0],H=J[1],B=Object(l.useState)(""),G=Object(c.a)(B,2),z=G[0],E=G[1],q=Object(l.useState)(""),K=Object(c.a)(q,2),Q=K[0],V=K[1],X=Object(l.useState)([]),Y=Object(c.a)(X,2),Z=Y[0],ee=Y[1];function te(e){if(!e)return"^(.*?)\\.(?:out|ans|OUT|ANS)$";var t=e;return(t=(t=t.split("input").join("output")).split("INPUT").join("OUTPUT")).endsWith(".in")&&(t=t.substring(0,t.length-3)+".(?:out|ans)"),t.endsWith(".IN")&&(t=t.substring(0,t.length-3)+".(?:OUT|ANS)"),t.endsWith(".in$")&&(t=t.substring(0,t.length-4)+".(?:out|ans)$"),t.endsWith(".IN$")&&(t=t.substring(0,t.length-4)+".(?:OUT|ANS)$"),t===e?"":t}function ne(e){if(!e)return"^(.*?)\\.(?:in|IN)$";var t=e;return((t=(t=t.split("output").join("input")).split("OUTPUT").join("INPUT")).endsWith(".out")||t.endsWith(".ans"))&&(t=t.substring(0,t.length-4)+".in"),(t.endsWith(".OUT")||t.endsWith(".ANS"))&&(t=t.substring(0,t.length-4)+".IN"),(t.endsWith(".out$")||t.endsWith(".ans$"))&&(t=t.substring(0,t.length-5)+".in"),(t.endsWith(".OUT$")||t.endsWith(".ANS$"))&&(t=t.substring(0,t.length-5)+".IN"),t===e?"":t}var se=e.options.enableOutputFile;function ae(n,s){var a,i,u=ne(s),c=te(n),o=!1,l=!1;if(n||(n=u,o=!0),s||(s=c,l=!0),!n||!s)return H(""),E(""),V(""),void ee([]);try{a=new RegExp(n),H("")}catch(g){H(o?"":t(".subtasks.auto_add_testcases.can_not_compile_for_input",{message:g.message})),V(""),ee([])}if(se)try{i=new RegExp(s),E("")}catch(g){E(l?"":t(".subtasks.auto_add_testcases.can_not_compile_for_output",{message:g.message})),V(""),ee([])}if(!(null==a||null==i&&se))if(se){var r=e.testData.map((function(e){return e.filename.match(a)})).filter((function(e){return e})),m=e.testData.map((function(e){return e.filename.match(i)})).filter((function(e){return e})),b=[];if(r.length>0&&m.length>0){var d=r[0].length-1;if(d!==m[0].length-1)V(t(".subtasks.auto_add_testcases.capturing_groups_do_not_match",{countInInputFilename:String(d),countInOutputFilename:String(m[0].length-1)}));else if(0===d)V(t(".subtasks.auto_add_testcases.no_capturing_groups"));else{for(;0!==r.length;)for(var p=r.shift(),j=0;j<m.length;j++){for(var f=!1,O=1;O<=d;O++)if(p[O]!==m[j][O]){f=!0;break}f||(b.push([p.input,m[j].input]),m.splice(j,1))}ee(b)}}}else{var h=e.testData.filter((function(e){return e.filename.match(a)})).map((function(e){return[e.filename,null]}));ee(h)}}function ie(e){return e.map((function(e){return{uuid:Object(v.a)(),inputFile:e[0],outputFile:e[1]}}))}function ue(){e.onUpdate({testcases:ie(Z)}),k(!0),oe.close()}var ce=[R,z,Q].filter((function(e){return e})).join("\n"),oe=Object(N.e)({},Object(o.jsx)(O.a,{icon:"magic",className:y.a.dialogHeader,content:Object(o.jsxs)(o.Fragment,{children:[t(".subtasks.auto_add_testcases.auto_add_testcases"),Object(o.jsx)("div",{className:y.a.dialogHeaderInfo,children:t(".subtasks.auto_add_testcases.subtask")+" #"+(e.subtaskIndex+1)})]})}),function(){var n=ne(P),s=te(U),a=U||n,i=P||s;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{className:y.a.autoAddTestcasesHelp,children:t(e.options.enableOutputFile?".subtasks.auto_add_testcases.help":".subtasks.auto_add_testcases.help_no_output")}),Object(o.jsx)(h.a,{children:Object(o.jsxs)(h.a.Group,{children:[Object(o.jsxs)(h.a.Field,{width:8,children:[Object(o.jsx)("label",{children:t(".subtasks.auto_add_testcases.input_file")}),Object(o.jsx)(b.a,{placeholder:n,value:U,icon:"sign in",iconPosition:"left",onChange:function(e,t){var n=t.value;w(n),ae(n,P)}})]}),e.options.enableOutputFile&&Object(o.jsxs)(h.a.Field,{width:8,children:[Object(o.jsx)("label",{children:t(".subtasks.auto_add_testcases.output_file")}),Object(o.jsx)(b.a,{placeholder:s,value:P,icon:"sign out",iconPosition:"left",onChange:function(e,t){var n=t.value;$(n),ae(U,n)}})]})]})}),ce?Object(o.jsx)(g.a,{className:y.a.dialogMessage,error:!0,content:ce}):Object(o.jsx)(g.a,{className:y.a.dialogMessage,success:Z.length>0,info:0===Z.length,content:a&&i?t(".subtasks.auto_add_testcases.matches_count",{count:Z.length.toString()}):t(".subtasks.auto_add_testcases.empty_regex")}),Z.length>0&&Object(o.jsxs)(x.a,{textAlign:"center",compact:"very",celled:!0,unstackable:!0,children:[Object(o.jsx)(x.a.Header,{children:Object(o.jsx)(x.a.Row,{children:[1,2].map((function(n){return Object(o.jsxs)(r.a.Fragment,{children:[Object(o.jsx)(x.a.HeaderCell,{width:1,children:"#"}),Object(o.jsx)(x.a.HeaderCell,{width:e.options.enableOutputFile?3:6,children:t(".subtasks.auto_add_testcases.column_input_file")}),e.options.enableOutputFile&&Object(o.jsx)(x.a.HeaderCell,{width:3,children:t(".subtasks.auto_add_testcases.column_output_file")})]},n)}))})}),Object(o.jsx)(x.a.Body,{children:Object(u.a)(Array(Math.ceil(Z.length/2))).map((function(e,t,n){return[t,n.length+t]})).map((function(t){return Object(o.jsx)(x.a.Row,{children:t.map((function(t){return t>=Z.length?null:Object(o.jsxs)(r.a.Fragment,{children:[Object(o.jsx)(x.a.Cell,{children:Object(o.jsx)("strong",{children:t+1})}),Object(o.jsx)(x.a.Cell,{children:Z[t][0]}),e.options.enableOutputFile&&Object(o.jsx)(x.a.Cell,{children:Z[t][1]})]},t)}))})}))})]})]})}(),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f.a,{content:t(".subtasks.auto_add_testcases.close"),onClick:function(){return oe.close()}}),Object(o.jsx)(f.a,{positive:!0,disabled:0===Z.length,content:t(".subtasks.auto_add_testcases.append"),onClick:function(){var t=e.subtask.testcases.map((function(e){return[e.inputFile,e.outputFile]})),n=Z.filter((function(e){return!t.some((function(t){return e[0]===t[0]&&e[1]===t[1]}))}));e.onUpdate({testcases:e.subtask.testcases.concat(ie(n))}),k(!0),oe.close()}}),Object(o.jsx)(j.a,{trigger:Object(o.jsx)(f.a,{primary:!0,disabled:0===Z.length,content:t(".subtasks.auto_add_testcases.replace"),onClick:function(){return 0===e.subtask.testcases.length&&ue()}}),disabled:0===e.subtask.testcases.length,content:Object(o.jsx)(f.a,{content:t(".subtasks.auto_add_testcases.confirm_replace"),onClick:ue}),on:"click",position:"top center"})]}));var le=Object(N.m)(1128,1/0);return Object(o.jsxs)(o.Fragment,{children:[oe.element,Object(o.jsxs)(m.a,{attached:"top",className:y.a.menu+" "+y.a.menuHeader+" "+y.a["color_"+T(e.subtask.uuid)],children:[Object(o.jsxs)(m.a.Item,{className:y.a.itemTitle,children:[Object(o.jsx)("strong",{children:1===e.subtaskCount?t(".subtasks.single_subtask"):Object(o.jsxs)(o.Fragment,{children:[t(".subtasks.subtask"),"  #",e.subtaskIndex+1]})}),Object(o.jsx)("div",{className:y.a.subtaskTitleTestcasesCount,children:le?t(".subtasks.subtask_testcases_count",{count:e.subtask.testcases.length.toString()}):e.subtask.testcases.length})]}),Object(o.jsxs)(m.a.Menu,{position:"right",children:[e.options.enableTimeMemoryLimit&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(m.a.Item,{className:y.a.itemSubtaskTimeLimit,children:Object(o.jsx)(b.a,{transparent:!0,placeholder:e.defaultTimeLimit,value:null==e.subtask.timeLimit?"":e.subtask.timeLimit,icon:"clock",iconPosition:"left",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0)&&e.onUpdate({timeLimit:""===s?null:Number(s)})}})}),Object(o.jsx)(m.a.Item,{className:y.a.itemLabel,children:"ms"}),Object(o.jsx)(m.a.Item,{className:y.a.itemSubtaskMemoryLimit,children:Object(o.jsx)(b.a,{transparent:!0,placeholder:e.defaultMemoryLimit,value:null==e.subtask.memoryLimit?"":e.subtask.memoryLimit,icon:"microchip",iconPosition:"left",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0)&&e.onUpdate({memoryLimit:""===s?null:Number(s)})}})}),Object(o.jsx)(m.a.Item,{className:y.a.itemLabel,children:"MiB"})]}),e.subtaskCount>1&&Object(o.jsx)(m.a.Item,{className:y.a.itemSubtaskScore,children:Object(o.jsx)(b.a,{transparent:!0,placeholder:e.defaultPercentagePoints,value:null==e.subtask.points?"":e.subtask.points,icon:"percent",onChange:function(t,n){var s=n.value;return(""===s||Number.isSafeInteger(Number(s))&&Number(s)>=0&&Number(s)<=100)&&e.onUpdate({points:""===s?null:Number(s)})}})}),Object(o.jsx)(p.a,{innerRef:_,children:Object(o.jsx)(d.a,{item:!0,icon:"bars",className:"icon ".concat(y.a.itemWithIcon),children:Object(o.jsxs)(d.a.Menu,{children:[Object(o.jsx)(d.a.Item,{icon:"sort numeric down",text:t(".subtasks.subtask_options.sort"),onClick:function(){var t=e.subtask.testcases.map((function(e){return[(e.inputFile||e.outputFile).match(/\d+/g).map(parseInt),e]}));t.sort((function(e,t){var n=Object(c.a)(e,1)[0],s=Object(c.a)(t,1)[0];if(n.length!=s.length)return n.length-s.length;for(var a=0;a<n.length;a++)if(n[a]!=s[a])return n[a]-s[a];return 0})),e.onUpdate({testcases:t.map((function(e){var t=Object(c.a)(e,2);t[0];return t[1]}))})}}),Object(o.jsx)(d.a.Item,{icon:"arrow up",text:t(".subtasks.subtask_options.add_before"),onClick:function(){return e.onAddSubtaskBefore()}}),Object(o.jsx)(d.a.Item,{icon:"arrow down",text:t(".subtasks.subtask_options.add_after"),onClick:function(){return e.onAddSubtaskAfter()}}),Object(o.jsx)(d.a.Item,{icon:"plus",text:t(".subtasks.subtask_options.add_testcase"),onClick:function(){return e.onAddTestcase(e.subtask.testcases.length),k(!0)}}),Object(o.jsx)(d.a.Item,{icon:"angle double up",text:t(".subtasks.subtask_options.move_up"),disabled:0===e.subtaskIndex,onClick:function(){return e.onMoveUp()}}),Object(o.jsx)(d.a.Item,{icon:"angle double down",text:t(".subtasks.subtask_options.move_down"),disabled:e.subtaskIndex===e.subtaskCount-1,onClick:function(){return e.onMoveDown()}}),Object(o.jsx)(j.a,{trigger:Object(o.jsx)(d.a.Item,{icon:"delete",text:t(".subtasks.subtask_options.delete")}),context:_,content:Object(o.jsx)(f.a,{negative:!0,content:t(".subtasks.subtask_options.confirm_delete"),onClick:function(){return e.onDelete()}}),on:"click",position:"bottom center"})]})})}),Object(o.jsx)(m.a.Item,{as:"a",icon:"magic",className:y.a.itemWithIcon,onClick:function(){oe.open(),ae(U,P)}})]})]}),Object(o.jsxs)(m.a,{attached:!0,className:y.a.menu,children:[Object(o.jsx)(d.a,{item:!0,value:e.subtask.scoringType,className:y.a.itemScoringTypeDropdown,options:Object.values(s).map((function(e){return{key:e,value:e,text:t(".subtasks.subtask_type.".concat(e))}})),onChange:function(t,n){var s=n.value;return e.onUpdate({scoringType:s})}}),Object(o.jsx)(m.a.Menu,{position:"right",children:0===e.subtask.testcases.length?Object(o.jsx)(m.a.Item,{icon:"circle outline",content:t(".subtasks.no_testcases")}):Object(o.jsx)(m.a.Item,{as:"a",icon:i?"minus square outline":"plus square outline",content:t(i?".subtasks.hide_testcases":".subtasks.expand_testcases"),onClick:function(){return k(!i)}})})]}),i&&e.subtask.testcases.map((function(t,n){return Object(o.jsx)(C,{options:e.options,testData:e.testData,testcaseIndex:n,testcaseCount:e.subtask.testcases.length,testcase:t,defaultPercentagePoints:L,defaultTimeLimit:null!=e.subtask.timeLimit?e.subtask.timeLimit:e.defaultTimeLimit,defaultMemoryLimit:null!=e.subtask.memoryLimit?e.subtask.memoryLimit:e.defaultMemoryLimit,onUpdate:function(t){return e.onUpdateTestcase(n,t)},onDelete:function(){return e.onDeleteTestcase(n)},onMoveUp:function(){return e.onMoveTestcaseUp(n)},onMoveDown:function(){return e.onMoveTestcaseDown(n)},onAddTestcaseBefore:function(){return e.onAddTestcase(n)},onAddTestcaseAfter:function(){return e.onAddTestcase(n+1)}},t.uuid)})),e.subtaskCount>1&&Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(m.a,{attached:"bottom",className:y.a.menu+" "+y.a.menuFooter,children:[Object(o.jsx)(m.a.Item,{children:t(".subtasks.dependencies")}),Object(o.jsx)(d.a,{className:y.a.itemSearchDropdown+" "+y.a.itemDependencies,item:!0,multiple:!0,search:!0,selection:!0,value:e.subtask.dependencies,options:Object(u.a)(Array(e.subtaskCount).keys()).filter((function(t){return t!=e.subtaskIndex})).map((function(e){return{key:e,value:e,text:e+1}})),onChange:function(t,n){var s=n.value;return e.onUpdate({dependencies:s})}})]})})]})};S=Object(k.a)(S);var M=function(e){var t=Object(N.i)("problem_judge_settings"),n=e.judgeInfo,a=Object(l.useMemo)((function(){return!0===e.options.enableInputFile||"optional"===e.options.enableInputFile&&!0!==e.options.enableOutputFile?(t=e.testData,n=!0!==e.options.enableOutputFile,t.filter((function(e){return e.filename.toLowerCase().endsWith(".in")})).map((function(e){return[e,t.find((function(t){return[".out",".ans"].map((function(t){return e.filename.slice(0,-3).toLowerCase()+t})).includes(t.filename.toLowerCase())})),(e.filename.match(/\d+/g)||[]).map(Number)]})).filter((function(e){var t=Object(c.a)(e,2)[1];return!!n||t})).sort((function(e,t){var n=Object(c.a)(e,3),s=n[0],a=n[2],i=Object(c.a)(t,3),o=i[0],l=i[2],r=Object(u.a)(Array(Math.max(a.length,l.length)).keys()).findIndex((function(e){return a[e]!==l[e]}));return-1===r?s.filename<o.filename?-1:1:a[r]-l[r]})).map((function(e){var t=Object(c.a)(e,2),n=t[0],s=t[1];return{inputFile:n.filename,outputFile:null===s||void 0===s?void 0:s.filename}}))):function(e,t){return e.filter((function(e){return(t=e.filename.toLowerCase()).endsWith(".out")||t.endsWith(".ans");var t})).map((function(t){return[t,e.find((function(e){return"".concat(t.filename.slice(0,-4).toLowerCase(),".in")===e.filename.toLowerCase()})),(t.filename.match(/\d+/g)||[]).map(Number)]})).filter((function(e){var n=Object(c.a)(e,2)[1];return!!t||n})).sort((function(e,t){var n=Object(c.a)(e,3),s=n[0],a=n[2],i=Object(c.a)(t,3),o=i[0],l=i[2],r=Object(u.a)(Array(Math.max(a.length,l.length)).keys()).findIndex((function(e){return a[e]!==l[e]}));return-1===r?s.filename<o.filename?-1:1:a[r]-l[r]})).map((function(e){var t=Object(c.a)(e,2),n=t[0],s=t[1];return{inputFile:null===s||void 0===s?void 0:s.filename,outputFile:n.filename}}))}(e.testData,!0);var t,n}),[e.testData]),r=Object(l.useState)(n.subtasks||[{scoringType:s.Sum,testcases:[],uuid:Object(v.a)(),dependencies:[]}]),m=Object(c.a)(r,2),b=m[0],d=m[1],p=(n.subtasks||[]).map((function(e){return e.points})).filter((function(e){return null!=e})).reduce((function(e,t){return e+t}),0),j=(n.subtasks||[]).filter((function(e){return null==e.points})).length,f=(p>100?0:Math.round((100-p)/j))||0;function O(t){e.onUpdateJudgeInfo({subtasks:I()(n.subtasks,t)})}function g(e){return function(t){return t.map((function(t){return Object.assign({},t,{dependencies:t.dependencies.map(e).filter((function(e){return null!=e}))})}))}}function k(e,t){var s=n.subtasks[e],a=e+("UP"===t?-1:1);O({$splice:[[e,1],[e+("UP"===t?-1:1),0,s]],$apply:g((function(t){return t===a?e:t==e?a:t}))})}function _(e,t){O({$splice:[[e,0,{uuid:Object(v.a)(),scoringType:t.scoringType,points:null,timeLimit:t.timeLimit,memoryLimit:t.memoryLimit,dependencies:t.dependencies,testcases:[]}]],$apply:g((function(t){return t>=e?t+1:t}))})}function F(e,t,s){var a=n.subtasks[e].testcases[t];O(Object(i.a)({},e,{testcases:{$splice:[[t,1],[t+("UP"===s?-1:1),0,a]]}}))}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(h.a,{children:Object(o.jsx)(h.a.Group,{children:Object(o.jsx)(h.a.Checkbox,{width:16,label:Object(o.jsx)("label",{dangerouslySetInnerHTML:{__html:t(e.options.enableOutputFile?".subtasks.auto_testcases":".subtasks.auto_testcases_no_output")}}),checked:!n.subtasks,onChange:function(t,s){s.checked?(d(n.subtasks),e.onUpdateJudgeInfo({subtasks:null})):e.onUpdateJudgeInfo({subtasks:b})}})})}),n.subtasks?Object(o.jsx)("div",{className:y.a.subtasksEditor,children:n.subtasks.map((function(t,a){return Object(o.jsx)(S,{options:e.options,testData:e.testData,subtaskIndex:a,subtaskCount:n.subtasks.length,subtask:t,defaultPercentagePoints:f,defaultTimeLimit:n.timeLimit,defaultMemoryLimit:n.memoryLimit,onUpdate:function(e){return function(e,t){O(Object(i.a)({},e,{$merge:t}))}(a,e)},onDelete:function(){return e=a,void(1!==n.subtasks.length?O({$splice:[[e,1]],$apply:g((function(t){return t===e?null:t>e?t-1:t}))}):O({$set:[{uuid:Object(v.a)(),scoringType:s.Sum,testcases:[],dependencies:[]}]}));var e},onMoveUp:function(){return k(a,"UP")},onMoveDown:function(){return k(a,"DOWN")},onAddSubtaskBefore:function(){return _(a,t)},onAddSubtaskAfter:function(){return _(a+1,t)},onUpdateTestcase:function(e,t){return function(e,t,n){O(Object(i.a)({},e,{testcases:Object(i.a)({},t,{$merge:n})}))}(a,e,t)},onDeleteTestcase:function(e){return function(e,t){O(Object(i.a)({},e,{testcases:{$splice:[[t,1]]}}))}(a,e)},onMoveTestcaseUp:function(e){return F(a,e,"UP")},onMoveTestcaseDown:function(e){return F(a,e,"DOWN")},onAddTestcase:function(e){return function(e,t){O(Object(i.a)({},e,{testcases:{$splice:[[t,0,{uuid:Object(v.a)(),inputFile:null,outputFile:null,userOutputFilename:null,points:null,timeLimit:null,memoryLimit:null}]]}}))}(a,e)}},t.uuid)}))}):Object(o.jsxs)(x.a,{textAlign:"center",children:[Object(o.jsx)(x.a.Header,{children:Object(o.jsxs)(x.a.Row,{children:[Object(o.jsx)(x.a.HeaderCell,{width:2,children:"#"}),e.options.enableInputFile&&Object(o.jsx)(x.a.HeaderCell,{width:e.options.enableOutputFile?7:14,children:t(".subtasks.testcase.input_file")}),e.options.enableOutputFile&&Object(o.jsx)(x.a.HeaderCell,{width:e.options.enableInputFile?7:14,children:t(".subtasks.testcase.output_file")})]})}),Object(o.jsx)(x.a.Body,{children:a.length>0?a.map((function(t,n){return Object(o.jsxs)(x.a.Row,{children:[Object(o.jsx)(x.a.Cell,{children:n+1}),Object(o.jsx)(x.a.Cell,{children:t.inputFile}),e.options.enableOutputFile&&Object(o.jsx)(x.a.Cell,{children:t.outputFile})]},n)})):Object(o.jsx)(x.a.Row,{children:Object(o.jsx)(x.a.Cell,{colSpan:3,children:t(".subtasks.cannot_detect_testcases_from_testdata")})})})]})]})};M=Object(k.a)(M);var U={parseJudgeInfo:function(e,t,n){var a=Array.isArray(e.subtasks)?e.subtasks.length:0;return{subtasks:Array.isArray(e.subtasks)&&e.subtasks.length>0?e.subtasks.map((function(e){return e||{}})).map((function(t){return{uuid:Object(v.a)(),scoringType:t.scoringType in s?t.scoringType:s.Sum,points:Number.isSafeInteger(t.points)&&e.subtasks.length>1?t.points:null,timeLimit:n.enableTimeMemoryLimit&&Number.isSafeInteger(t.timeLimit)?t.timeLimit:null,memoryLimit:n.enableTimeMemoryLimit&&Number.isSafeInteger(t.memoryLimit)?t.memoryLimit:null,dependencies:Array.isArray(t.dependencies)?t.dependencies.filter((function(e){return"number"===typeof e&&e>=0&&e<a})):[],testcases:Array.isArray(t.testcases)?t.testcases.map((function(e){return e||{}})).map((function(e){return{uuid:Object(v.a)(),inputFile:n.enableInputFile&&"string"===typeof e.inputFile?e.inputFile:"",outputFile:n.enableOutputFile&&"string"===typeof e.outputFile?e.outputFile:"",userOutputFilename:n.enableUserOutputFilename&&"string"===typeof e.userOutputFilename?e.userOutputFilename:"",points:Number.isSafeInteger(e.points)&&t.testcases.length>0?e.points:null,timeLimit:n.enableTimeMemoryLimit&&Number.isSafeInteger(e.timeLimit)?e.timeLimit:null,memoryLimit:n.enableTimeMemoryLimit&&Number.isSafeInteger(e.memoryLimit)?e.memoryLimit:null}})):[]}})):null}},normalizeJudgeInfo:function(e,t){if(e.subtasks){var n,s=Object(a.a)(e.subtasks);try{for(s.s();!(n=s.n()).done;){var i=n.value;delete i.uuid,null==i.points&&delete i.points,t.enableTimeMemoryLimit&&null!=i.timeLimit||delete i.timeLimit,t.enableTimeMemoryLimit&&null!=i.memoryLimit||delete i.memoryLimit,null!=i.dependencies&&0!==i.dependencies.length||delete i.dependencies;var u,c=Object(a.a)(i.testcases);try{for(c.s();!(u=c.n()).done;){var o=u.value;delete o.uuid,null==o.points&&delete o.points,t.enableInputFile?o.inputFile||(o.inputFile=null):delete o.inputFile,t.enableOutputFile?o.outputFile||(o.outputFile=null):delete o.outputFile,t.enableUserOutputFilename&&o.userOutputFilename||delete o.userOutputFilename,t.enableTimeMemoryLimit&&null!=o.timeLimit||delete o.timeLimit,t.enableTimeMemoryLimit&&null!=o.memoryLimit||delete o.memoryLimit}}catch(l){c.e(l)}finally{c.f()}}}catch(l){s.e(l)}finally{s.f()}}else delete e.subtasks}};t.a=Object.assign(M,U)}}]);
//# sourceMappingURL=75.b31beed3.chunk.js.map