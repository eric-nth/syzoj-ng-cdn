(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[168],{1671:function(e,a,r){"use strict";r.r(a),r.d(a,"fetchData",(function(){return k})),r.d(a,"View",(function(){return y}));var t,n=r(10),s=r.n(n),c=r(179),i=r(19),o=r(15),u=r(1),l=r(0),p=r(1803),b=r(1807),d=r(618),g=r(55),j=r(738),f=r.n(j),m=r(181),v=r(9),O=r(182),h=r(22),w=r(183),x=r(37);function k(e){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(s.a.mark((function e(a){var r,t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.c.user.getUserMeta({username:a,getPrivileges:!0});case 2:if(r=e.sent,t=r.requestError,n=r.response,!t){e.next=9;break}throw new w.a(t,{showRefresh:!0,showBack:!0});case 9:if(!n.error){e.next=11;break}throw new w.a(Object(x.c)("user_edit.errors.".concat(n.error)));case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.EditHomepage="EditHomepage",e.ManageUser="ManageUser",e.ManageUserGroup="ManageUserGroup",e.ManageProblem="ManageProblem",e.ManageContest="ManageContest",e.ManageDiscussion="ManageDiscussion",e.SkipRecaptcha="SkipRecaptcha"}(t||(t={}));var y=Object(g.a)((function(e){var a=Object(h.i)("user_edit.privilege");Object(l.useEffect)((function(){v.a.enterNewPage("".concat(a(".title")," - ").concat(e.meta.username),null,!1)}),[v.a.locale,e.meta]);var r=Object(h.d)(),n=Object(i.a)(r,2)[1],g=Object(h.b)(Object(o.a)(s.a.mark((function r(){var t,i,o;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.c.user.setUserPrivileges({userId:e.meta.id,privileges:Object(c.a)(y)});case 2:t=r.sent,i=t.requestError,o=t.response,i?O.a.error(i(a)):o.error?O.a.error(a("user_edit.errors.".concat(o.error))):(n(!1),O.a.success(a(".success")));case 6:case"end":return r.stop()}}),r)})))),j=Object(i.a)(g,2),w=j[0],x=j[1],k=Object(l.useState)(new Set(e.privileges)),M=Object(i.a)(k,2),y=M[0],U=M[1];var N=v.a.currentUser.isAdmin;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p.a,{className:f.a.sectionHeader,size:"large",content:a(".header")}),Object.values(t).map((function(e){return Object(u.jsxs)("div",{className:f.a.privilegeRow,children:[Object(u.jsx)(b.a,{toggle:!0,readOnly:!N,label:a(".privileges.".concat(e,".name")),checked:y.has(e),onChange:function(a,r){var t=r.checked;return function(e,a){var r=new Set(y);a?r.add(e):r.delete(e),U(r),n(!0)}(e,t)}}),Object(u.jsx)("div",{className:f.a.notes,children:a(".privileges.".concat(e,".notes"))})]},e)})),Object(u.jsx)("div",{className:f.a.notes+" "+f.a.notesAdminOnly,children:a(".admin_only")}),Object(u.jsx)(d.a,{className:f.a.submit,loading:w,disabled:!N,primary:!0,content:a(".submit"),onClick:x})]})}))}}]);
//# sourceMappingURL=168.9c09df32.chunk.js.map