(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[59],{842:function(e,r,s){"use strict";s.r(r),s.d(r,"getNewDiscussionUrl",(function(){return Q})),s.d(r,"getBreadcrumb",(function(){return A}));var n=s(10),c=s.n(n),t=s(19),a=s(15),i=s(1),l=s(0),o=s(1804),u=s(601),b=s(155),d=s(99),j=s(618),h=s(602),m=s(1803),p=s(1795),O=s(55),x=s(1799),f=s(1338),g=s.n(f),v=s(183),y=s(9),w=s(181),k=s(22),N=s(779),I=s(737),_=s(734),C=s(684),P=s(720),R=s(163),S=s(37),F=s(109),q=s(989);function Q(e){return{pathname:"/d/new",query:e&&{problemId:String(e)}}}function A(e,r,s,n){return Object(i.jsxs)(o.a,{className:g.a.breadcrumb,children:[Object(i.jsx)(o.a.Section,{children:r("discussions.breadcrumb.discussion")}),Object(i.jsx)(o.a.Divider,{icon:"right angle"}),s?Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(o.a.Section,{active:!0,className:g.a.switch,children:[r("general"===s?"discussions.breadcrumb.general":"discussions.breadcrumb.problem"),Object(i.jsx)("span",{className:g.a.divider,children:"/"}),"allProblems"===s?Object(i.jsx)(k.a,{href:"/d",children:r("discussions.breadcrumb.general")}):Object(i.jsx)(k.a,{href:{pathname:"/d",query:{problemId:"all"}},children:r("discussions.breadcrumb.problem")})]})}):e?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(o.a.Section,{active:!0,as:k.a,href:{pathname:"/d",query:{problemId:"all"}},className:g.a.allProblemsLink,children:r("discussions.breadcrumb.problem")}),Object(i.jsx)(o.a.Divider,{icon:"right angle"}),Object(i.jsx)(F.a,{children:Object(i.jsx)(o.a.Section,{active:!0,as:k.a,href:Object(C.c)(e.meta),children:Object(C.a)(e.meta,e.title,r,"all")})})]}):Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(o.a.Section,{active:!0,as:k.a,href:"/d",children:r("discussions.breadcrumb.general")})}),n]})}var D=y.a.serverPreference.pagination.discussions;function H(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s={locale:y.a.locale,skipCount:D*(r-1),takeCount:D};return e.keyword&&(s.keyword=e.keyword),e.problemId&&(s.problemId=e.problemId),e.publisherId&&(s.publisherId=e.publisherId),e.nonpublic&&(s.nonpublic=!0),s}function z(e,r){return E.apply(this,arguments)}function E(){return(E=Object(a.a)(c.a.mark((function e(r,s){var n,t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.c.discussion.queryDiscussions(H(r,s));case 2:if(n=e.sent,t=n.requestError,a=n.response,!t){e.next=9;break}throw new v.a(t,{showRefresh:!0,showBack:!0});case 9:if(!a.error){e.next=11;break}throw new v.a(Object(S.c)("discussions.error.".concat(a.error)));case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var r={};return e.keyword&&(r.keyword=e.keyword.substr(0,100)),e.problemId&&(r.problemId=e.problemId.toString()),e.publisherId&&(r.publisherId=e.publisherId.toString()),e.nonpublic&&(r.nonpublic=""),r}var B=function(e){var r,s,n,c,a=Object(k.i)("discussions");Object(l.useEffect)((function(){y.a.enterNewPage(a(".title"),"discussion")}),[y.a.locale]);var o=Object(k.k)(),O=Object(k.m)(0,1024),x=Object(k.m)(0,640),f=-1===e.searchQuery.problemId,v=Object(l.useState)("title"),w=Object(t.a)(v,2),S=w[0],z=w[1];function E(r){o.navigate({query:U(Object.assign({},e.searchQuery,r))})}function B(){e.searchQuery.nonpublic||(!e.response.permissions.filterNonpublic&&y.a.currentUser?E({publisherId:y.a.currentUser.id,nonpublic:!0}):E({nonpublic:!0}))}var M=Object(i.jsxs)(i.Fragment,{children:["title"===S?Object(i.jsx)(q.a,{queryParameters:H(e.searchQuery),onResultSelect:function(e){return o.navigate(Object(_.b)(e.meta))},onEnterPress:function(e){return function(e){E({keyword:e.substr(0,100)})}(e)}}):Object(i.jsx)(N.a,{className:g.a.search,onResultSelect:function(e){E({publisherId:e.id})}}),Object(i.jsxs)(u.a,{className:g.a.searchMenu,secondary:!0,children:[Object(i.jsx)(u.a.Item,{className:g.a.searchMenuItem,icon:"user",active:"user"===S,title:a(".search_icon.user"),onClick:function(){return z("user"===S?"title":"user")}}),(e.response.permissions.filterNonpublic||y.a.currentUser&&e.searchQuery.publisherId===y.a.currentUser.id)&&Object(i.jsx)(u.a.Item,{className:g.a.searchMenuItem,icon:"eye slash",active:!1,title:a(".search_icon.nonpublic"),onClick:function(){return B()}})]})]}),T=e.searchQuery.keyword||e.response.filterPublisher||e.searchQuery.nonpublic,J=T&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("strong",{children:a(".search_filters")}),e.searchQuery.keyword&&Object(i.jsxs)(b.a,{size:"small",color:"grey",children:[Object(i.jsx)(d.a,{name:"file alternate"}),e.searchQuery.keyword,Object(i.jsx)(d.a,{name:"delete",onClick:function(){E({keyword:""})}})]}),e.response.filterPublisher&&Object(i.jsxs)(b.a,{size:"small",color:"pink",children:[Object(i.jsx)(d.a,{name:"user"}),e.response.filterPublisher.username,Object(i.jsx)(d.a,{name:"delete",onClick:function(){!e.response.permissions.filterNonpublic&&e.searchQuery.nonpublic?E({publisherId:null,nonpublic:!1}):E({publisherId:null})}})]}),e.searchQuery.nonpublic&&Object(i.jsxs)(b.a,{size:"small",color:"red",basic:!0,children:[Object(i.jsx)(d.a,{name:"eye slash"}),a(".non_public"),Object(i.jsx)(d.a,{name:"delete",onClick:function(){E({nonpublic:!1})}})]})]}),G=f?null:Object(i.jsx)("div",{className:g.a.headerButtons,children:e.response.permissions.createDiscussion&&Object(i.jsx)(j.a,{size:O?"small":null,primary:!0,className:O?"icon":"labeled icon",icon:"plus",content:O?"":a(".add_discussion"),as:k.a,href:Q(null===(r=e.response.filterProblem)||void 0===r||null===(s=r.meta)||void 0===s?void 0:s.id)})}),K=!f,L=A(e.response.filterProblem,a,f?"allProblems":e.response.filterProblem?null:"general");return Object(i.jsxs)(i.Fragment,{children:[x?Object(i.jsxs)(i.Fragment,{children:[L,Object(i.jsxs)("div",{className:g.a.headerRow,children:[M,G]}),Object(i.jsx)("div",{className:g.a.headerSearchFiltersRow,children:J})]}):Object(i.jsxs)(i.Fragment,{children:[L,Object(i.jsxs)("div",{className:g.a.headerRow,children:[M,Object(i.jsx)("div",{className:g.a.headerRightControls,children:G})]}),Object(i.jsx)("div",{className:g.a.headerSearchFiltersRow,children:J})]}),0===e.response.discussions.length?T?Object(i.jsxs)(h.a,{placeholder:!0,children:[Object(i.jsxs)(m.a,{icon:!0,children:[Object(i.jsx)(d.a,{name:"search"}),a(".no_discussions.message_search")]}),Object(i.jsxs)(h.a.Inline,{children:[Object(i.jsx)(j.a,{primary:!0,onClick:function(){return o.goBack()},children:a(".no_discussions.back")}),Object(i.jsx)(j.a,{onClick:function(){return E({keyword:"",publisherId:null,nonpublic:!1})},children:a(".no_discussions.clear_filters")})]})]}):Object(i.jsxs)(h.a,{placeholder:!0,children:[Object(i.jsxs)(m.a,{icon:!0,children:[Object(i.jsx)(d.a,{name:"file"}),a(".no_discussions.message_no_search")]}),e.response.permissions.createDiscussion&&Object(i.jsx)(h.a.Inline,{children:Object(i.jsx)(j.a,{primary:!0,as:k.a,href:Q(null===(n=e.response.filterProblem)||void 0===n||null===(c=n.meta)||void 0===c?void 0:c.id),children:a(".no_discussions.create")})})]}):Object(i.jsxs)(p.a,{basic:"very",textAlign:"center",unstackable:!0,children:[Object(i.jsx)(p.a.Header,{children:Object(i.jsx)(p.a.Row,{className:g.a.tableHeaderRow,children:x?Object(i.jsxs)(p.a.HeaderCell,{className:g.a.twoRow,textAlign:"left",children:[Object(i.jsx)("div",{children:a(".column_title")}),!K&&Object(i.jsx)("div",{children:a(".column_problem")}),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:a(".column_publisher")}),Object(i.jsx)("div",{children:a(".column_sort_time")})]})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a.HeaderCell,{textAlign:"left",children:a(".column_title")}),!K&&Object(i.jsx)(p.a.HeaderCell,{textAlign:"left",children:a(".column_problem")}),Object(i.jsx)(p.a.HeaderCell,{textAlign:"right",children:a(".column_publisher")}),!O&&Object(i.jsx)(p.a.HeaderCell,{width:1,className:g.a.nowrapRow,children:a(".column_reply_count")}),Object(i.jsx)(p.a.HeaderCell,{width:1,className:g.a.nowrapRow,children:a(".column_sort_time")})]})})}),Object(i.jsx)(p.a.Body,{children:e.response.discussions.map((function(e){return Object(i.jsx)(p.a.Row,{className:g.a.row,children:function(){var r=Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F.a,{children:Object(i.jsx)(k.a,{href:Object(_.b)(e.meta),children:Object(_.a)(e.meta.title,a)})}),!e.meta.isPublic&&Object(i.jsx)(b.a,{className:g.a.labelNonPublic,icon:"eye slash",size:"small",color:"red",basic:!0,content:a(".non_public"),as:"a",onClick:function(){return B()}})]}),s=!K&&Object(i.jsx)(i.Fragment,{children:e.problem&&Object(i.jsx)(F.a,{children:Object(i.jsx)(k.a,{href:Object(C.c)(e.problem.meta),children:Object(C.a)(e.problem.meta,e.problem.title,a,"all")})})}),n=Object(i.jsx)(P.a,{user:e.publisher});return x?Object(i.jsxs)(p.a.Cell,{className:g.a.twoRow,textAlign:"left",children:[Object(i.jsx)("div",{children:r}),s&&Object(i.jsx)("div",{children:s}),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:n}),Object(i.jsx)("div",{children:Object(R.a)(e.meta.sortTime)[1]})]})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a.Cell,{textAlign:"left",children:r}),s&&Object(i.jsx)(p.a.Cell,{textAlign:"left",children:s}),Object(i.jsx)(p.a.Cell,{textAlign:"right",children:n}),!O&&Object(i.jsx)(p.a.Cell,{className:g.a.nowrapRow,children:e.meta.replyCount}),Object(i.jsx)(p.a.Cell,{className:g.a.nowrapRow,children:O?Object(i.jsx)("span",{title:Object(R.a)(e.meta.sortTime)[1],children:Object(R.a)(e.meta.sortTime)[0]}):Object(R.a)(e.meta.sortTime)[1]})]})}()},e.meta.id)}))})]}),Object(i.jsx)("div",{className:g.a.pagination,children:e.response.count<=D?null:Object(i.jsx)(I.a,{totalCount:e.response.count,currentPage:e.currentPage,itemsPerPage:D,pageUrl:function(r){return{query:Object.assign({page:r.toString()},U(e.searchQuery))}}})})]})};B=Object(O.a)(B),r.default=Object(v.c)(function(){var e=Object(a.a)(c.a.mark((function e(r){var s,n,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=parseInt(r.query.page)||1,c=r.query,n={keyword:c.keyword||"",problemId:"all"===c.problemId?-1:Number.isSafeInteger(Number(c.problemId))?Number(c.problemId):null,publisherId:Number.isSafeInteger(Number(c.publisherId))?Number(c.publisherId):null,nonpublic:null!=c.nonpublic},e.next=4,z(n,s);case 4:return t=e.sent,e.abrupt("return",Object(i.jsx)(B,{searchQuery:n,currentPage:s,response:t},Object(x.a)()));case 6:case"end":return e.stop()}var c}),e)})));return function(r){return e.apply(this,arguments)}}())},989:function(e,r,s){"use strict";s.d(r,"a",(function(){return p}));var n=s(10),c=s.n(n),t=s(15),a=s(1),i=(s(0),s(55)),l=s(181),o=s(9),u=s(734),b=s(22),d=s(182),j=s(109),h=s(824),m=o.a.serverPreference.pagination.searchDiscussionsPreview,p=function(e){var r=Object(b.i)("discussions.search_discussion");return Object(a.jsx)(h.a,{className:e.className,placeholder:r(".placeholder"),noResultsMessage:r(".no_result"),onGetResultKey:function(e){return e.meta.id},onSearch:function(){var s=Object(t.a)(c.a.mark((function s(n){var t,a,i;return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n){s.next=2;break}return s.abrupt("return",[]);case 2:return s.next=4,l.c.discussion.queryDiscussions(Object.assign({locale:o.a.locale},e.queryParameters,{keyword:n,titleOnly:!0,skipCount:0,takeCount:m}));case 4:if(t=s.sent,a=t.requestError,i=t.response,!a){s.next=11;break}d.a.error(a(r)),s.next=12;break;case 11:return s.abrupt("return",i.discussions);case 12:return s.abrupt("return",[]);case 13:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),onRenderResult:function(e){return Object(a.jsx)(j.a,{children:Object(a.jsx)("div",{className:"title",children:Object(u.a)(e.meta.title,r)})})},onResultSelect:e.onResultSelect,onEnterPress:e.onEnterPress})};p=Object(i.a)(p)}}]);
//# sourceMappingURL=59.fc7dd4b4.chunk.js.map