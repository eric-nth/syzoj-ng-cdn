(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[81],{914:function(e,t,n){"use strict";n.r(t);var a,c=n(80),o=n(10),r=n.n(o),i=n(29),s=n(622),l=n(179),u=n(19),p=n(15),d=n(1),j=n(0),b=n(601),m=n(1725),O=n(1807),f=n(614),x=n(99),h=n(593),g=n(1790),S=n(618),v=n(602),w=n(1701),_=n(1792),y=n(1728),C=n(1726),I=n(1796),k=n(1803),T=n(619),D=n(1087),M=n(1799),N=n(758),A=n.n(N),L=n(1442),P=n.n(L),$=n(181),q=n(31),F=n(82),R=n(9),U=n(182),z=n(22),B=n(55),E=n(183),V=n(849),W=n(771),J=n(684),G=n(847),H=n(37),K=n(931),Q=n(112),X=(a={},Object(c.a)(a,q.a.zh_CN,[{uuid:Object(M.a)(),sectionTitle:"题目描述",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"输入格式",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"输出格式",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"样例",type:"Sample",sampleId:0,text:""},{uuid:Object(M.a)(),sectionTitle:"数据范围与提示",type:"Text",text:""}]),Object(c.a)(a,q.a.en_US,[{uuid:Object(M.a)(),sectionTitle:"Description",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"Input",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"Output",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"Sample",type:"Sample",sampleId:0,text:""},{uuid:Object(M.a)(),sectionTitle:"Limits And Hints",type:"Text",text:""}]),Object(c.a)(a,q.a.ja_JP,[{uuid:Object(M.a)(),sectionTitle:"問題文",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"入力",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"出力",type:"Text",text:""},{uuid:Object(M.a)(),sectionTitle:"例",type:"Sample",sampleId:0,text:""},{uuid:Object(M.a)(),sectionTitle:"制約",type:"Text",text:""}]),a);function Y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(p.a)(r.a.mark((function e(t,n){var a,o,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.c.problem.getProblem((a={},Object(c.a)(a,t,n),Object(c.a)(a,"localizedContentsOfAllLocales",!0),Object(c.a)(a,"tagsOfLocale",R.a.locale),Object(c.a)(a,"samples",!0),Object(c.a)(a,"permissionOfCurrentUser",!0),a));case 2:if(o=e.sent,i=o.requestError,s=o.response,!i){e.next=9;break}throw new E.a(i,{showRefresh:!0,showBack:!0});case 9:if(!s.error){e.next=11;break}throw new E.a(Object(H.c)("problem_edit.error.".concat(s.error)));case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return(te=Object(p.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.c.problem.getAllProblemTags({locale:R.a.locale});case 2:if(t=e.sent,n=t.requestError,a=t.response,!n){e.next=7;break}throw new E.a(n,{showRefresh:!0,showBack:!0});case 7:return e.abrupt("return",a.tags);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(e){var t=Object(z.i)("problem_edit"),n=Object(j.useState)(!1),a=Object(u.a)(n,2),c=a[0],o=a[1],r=Object(j.useState)(),i=Object(u.a)(r,2),s=i[0],p=i[1],C=Object(G.useProblemViewMarkdownContentPatcher)(e.problemId);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(b.a,{attached:"top",className:P.a.toolbarMenu,children:[Object(d.jsx)(b.a.Item,{className:P.a.toolbarMenuInputItem,children:Object(d.jsx)(m.a,{className:P.a.boldInput,fluid:!0,transparent:!0,placeholder:t(".content_editor.section_title"),value:e.section.sectionTitle,onChange:function(t,n){var a=n.value;return e.onChangeSectionValue("sectionTitle",a)}})}),Object(d.jsxs)(b.a.Menu,{position:"right",children:[Object(d.jsx)(b.a.Item,{children:Object(d.jsx)(O.a,{fitted:!0,label:t(".content_editor.preview"),checked:c||e.isPreview,disabled:e.isPreview,onChange:function(e,t){var n=t.checked;return o(n)}})}),"Sample"===e.section.type&&Object(d.jsx)(f.a,{item:!0,value:e.section.sampleId,options:[].concat(Object(l.a)(e.samples.map((function(t,n){return{key:n,text:n+1,value:n,onClick:function(){return e.onChangeSectionSampleId(n)}}}))),[{key:"new",text:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{name:"add"}),t(".content_editor.new_sample")]}),value:"new",onClick:function(){return e.onChangeSectionSampleId(null)}}])}),Object(d.jsx)(f.a,{item:!0,closeOnChange:!0,value:e.section.type,options:[{key:"Text",text:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{name:"sticky note"}),t(".content_editor.section_type.text")]}),value:"Text",onClick:function(){return"Text"===e.section.type||e.onChangeSectionType("Text")}},{key:"Sample",text:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{name:"sticky note outline"}),t(".content_editor.section_type.sample")]}),value:"Sample",onClick:function(){return"Sample"===e.section.type||e.onChangeSectionType("Sample")}}]}),Object(d.jsx)(f.a,{item:!0,closeOnChange:!0,icon:"add",className:"icon ".concat(P.a.toolbarMenuIconItem),children:Object(d.jsxs)(f.a.Menu,{children:[Object(d.jsx)(f.a.Item,{icon:"arrow up",text:t(".content_editor.add_section.before_this_section"),onClick:function(){return e.onAddSectionBefore()}}),Object(d.jsx)(f.a.Item,{icon:"arrow down",text:t(".content_editor.add_section.after_this_section"),onClick:function(){return e.onAddSectionAfter()}})]})}),Object(d.jsx)(h.a,{innerRef:p,children:Object(d.jsx)(f.a,{item:!0,icon:"bars",className:"icon ".concat(P.a.toolbarMenuIconItem),children:Object(d.jsxs)(f.a.Menu,{children:[Object(d.jsx)(f.a.Item,{disabled:e.isFirst,icon:"angle double up",text:t(".content_editor.section_options.move_up"),onClick:function(){return e.onMoveSectionUp()}}),Object(d.jsx)(f.a.Item,{disabled:e.isLast,icon:"angle double down",text:t(".content_editor.section_options.move_down"),onClick:function(){return e.onMoveSectionDown()}}),Object(d.jsx)(g.a,{trigger:Object(d.jsx)(f.a.Item,{disabled:e.isFirst&&e.isLast,icon:"delete",text:t(".content_editor.section_options.delete")}),context:s,content:Object(d.jsx)(S.a,{color:"red",content:t(".content_editor.section_options.confirm_delete"),onClick:function(){return e.onDeleteSection()}}),on:"click",position:"bottom right"})]})})})]})]}),Object(d.jsx)(v.a,{attached:"bottom",className:P.a.sectionSegment,"data-type":e.section.type,children:"Sample"===e.section.type?Object(d.jsxs)(w.a,{columns:"equal",className:P.a.sampleEditorGrid,children:[Object(d.jsxs)(w.a.Row,{children:[Object(d.jsx)(w.a.Column,{children:Object(d.jsx)(_.a,{children:Object(d.jsx)(y.a,{className:"monospace",rows:4,value:e.samples[e.section.sampleId].inputData,placeholder:t(".content_editor.sample_input"),onChange:function(t,n){var a=n.value;return e.onChangeSampleData(e.section.sampleId,"inputData",a)}})})}),Object(d.jsx)(w.a.Column,{children:Object(d.jsx)(_.a,{children:Object(d.jsx)(y.a,{className:"monospace",rows:4,value:e.samples[e.section.sampleId].outputData,placeholder:t(".content_editor.sample_output"),onChange:function(t,n){var a=n.value;return e.onChangeSampleData(e.section.sampleId,"outputData",a)}})})})]}),Object(d.jsx)(w.a.Row,{children:Object(d.jsx)(w.a.Column,{children:c||e.isPreview?Object(d.jsx)(v.a,{basic:!0,children:Object(d.jsx)(W.default,{content:e.section.text,patcher:C})}):Object(d.jsx)(_.a,{children:Object(d.jsx)(y.a,{className:Object(Q.d)(),as:D.a,minRows:6,maxRows:16,value:e.section.text,placeholder:t(".content_editor.sample_explanation"),onChange:function(t,n){var a=n.value;return e.onChangeSectionValue("text",a)}})})})})]}):c||e.isPreview?Object(d.jsx)(v.a,{basic:!0,children:Object(d.jsx)(W.default,{content:e.section.text,patcher:C})}):Object(d.jsx)(_.a,{children:Object(d.jsx)(y.a,{className:Object(Q.d)(),as:D.a,minRows:6,maxRows:16,value:e.section.text,placeholder:t(".content_editor.section_content"),onChange:function(t,n){var a=n.value;return e.onChangeSectionValue("text",a)}})})})]})},ae=function(e){var t=Object(z.i)("problem_edit"),n=Object(j.useState)(!1),a=Object(u.a)(n,2),c=a[0],o=a[1],r=Object(j.useState)(!1),i=Object(u.a)(r,2),s=i[0],l=i[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(b.a,{attached:"top",className:P.a.toolbarMenu,children:[Object(d.jsx)(b.a.Item,{className:P.a.toolbarMenuInputItem,children:Object(d.jsx)(m.a,{className:P.a.boldInput,fluid:!0,transparent:!0,placeholder:t(".content_editor.title"),value:e.localizedContent.title,onChange:function(t,n){var a=n.value;return e.onChangeTitle(a)}})}),Object(d.jsxs)(b.a.Menu,{position:"right",children:[Object(d.jsx)(b.a.Item,{children:Object(d.jsx)(O.a,{label:t(".content_editor.preview_all"),checked:c,onChange:function(e,t){var n=t.checked;return o(n)}})}),!e.isOnly&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(b.a.Item,{children:Object(d.jsx)(C.a,{label:t(".content_editor.default"),checked:e.isDefault,onChange:function(t,n){return n.checked&&e.onMakeDefault()}})})}),Object(d.jsx)(g.a,{trigger:Object(d.jsx)(b.a.Item,{as:"a",icon:"file alternate outline",className:P.a.toolbarMenuIconItem}),open:s,onOpen:function(){return l(!0)},onClose:function(){return l(!1)},content:Object(d.jsx)(S.a,{color:"green",content:t(".content_editor.add_default_sections"),onClick:function(){l(!1),e.onAddDefaultSections()}}),on:"click",position:"top right"}),!e.isOnly&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(g.a,{trigger:Object(d.jsx)(b.a.Item,{as:"a",icon:"delete",className:P.a.toolbarMenuIconItem}),content:Object(d.jsx)(S.a,{color:"red",content:t(".content_editor.confirm_delete"),onClick:function(){return e.onDelete()}}),on:"click",position:"top right"})})]})]}),e.localizedContent.contentSections.map((function(t,n){return Object(d.jsx)(ne,{problemId:e.problemId,section:t,samples:e.samples,isPreview:c,isFirst:0===n,isLast:n===e.localizedContent.contentSections.length-1,onChangeSectionValue:function(t,a){return e.onChangeSectionValue(n,t,a)},onChangeSectionType:function(t){return e.onChangeSectionType(n,t)},onChangeSectionSampleId:function(t){return e.onChangeSectionSampleId(n,t)},onChangeSampleData:e.onChangeSampleData,onAddSectionBefore:function(){return e.onAddSection(n,t.type)},onAddSectionAfter:function(){return e.onAddSection(n+1,t.type)},onMoveSectionUp:function(){return e.onMoveSection(n,"UP")},onMoveSectionDown:function(){return e.onMoveSection(n,"DOWN")},onDeleteSection:function(){return e.onDeleteSection(n)}},t.uuid)}))]})},ce=function(e){var t=Object(z.i)("problem_edit"),n=Object(j.useRef)(null);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(b.a,{attached:"top",className:P.a.toolbarMenu,children:[Object(d.jsx)(b.a.Item,{className:P.a.toolbarMenuInputItem,children:Object(d.jsx)(m.a,{className:P.a.boldInput,fluid:!0,transparent:!0,placeholder:t(".sample_editor.sample_id"),value:null==e.sampleId?"":e.sampleId+1,readOnly:!0})}),Object(d.jsxs)(b.a.Menu,{position:"right",children:[e.warningMessage.length>0&&Object(d.jsx)(g.a,{trigger:Object(d.jsx)(b.a.Item,{icon:"warning sign",className:P.a.toolbarMenuIconItem}),position:"top right",content:Object(d.jsx)(I.a,{bulleted:!0,className:P.a.sampleWarningMessage,children:e.warningMessage.map((function(e,n){return Object(d.jsx)(I.a.Item,{children:0===e.referenceCount?t(".sample_editor.warning.not_referenced",{language:F.a[e.locale].name}):t(".sample_editor.warning.multiple_references",{language:F.a[e.locale].name,referenceCount:e.referenceCount.toString()})},n)}))})}),Object(d.jsx)(f.a,{item:!0,closeOnChange:!0,icon:"add",className:"icon ".concat(P.a.toolbarMenuIconItem),children:Object(d.jsxs)(f.a.Menu,{children:[Object(d.jsx)(f.a.Item,{icon:"arrow up",text:t(".sample_editor.add_sample.before_this_sample"),onClick:function(){return e.onAddSampleBefore()}}),Object(d.jsx)(f.a.Item,{icon:"arrow down",text:t(".sample_editor.add_sample.after_this_sample"),onClick:function(){return e.onAddSampleAfter()}})]})}),Object(d.jsx)(h.a,{innerRef:n,children:Object(d.jsx)(f.a,{item:!0,icon:"bars",className:"icon ".concat(P.a.toolbarMenuIconItem),children:Object(d.jsxs)(f.a.Menu,{children:[Object(d.jsx)(f.a.Item,{disabled:e.isFirst,icon:"angle double up",text:t(".sample_editor.options.move_up"),onClick:function(){return e.onMoveSampleUp()}}),Object(d.jsx)(f.a.Item,{disabled:e.isLast,icon:"angle double down",text:t(".sample_editor.options.move_down"),onClick:function(){return e.onMoveSampleDown()}}),Object(d.jsx)(g.a,{trigger:Object(d.jsx)(f.a.Item,{icon:"delete",text:t(".sample_editor.options.delete")}),context:n,content:Object(d.jsx)(S.a,{color:"red",content:t(".sample_editor.options.confirm_delete"),onClick:function(){return e.onDeleteSample()}}),on:"click",position:"bottom right"})]})})})]})]}),Object(d.jsx)(v.a,{attached:"bottom",className:P.a.sectionSegment,children:Object(d.jsx)(w.a,{columns:"equal",className:P.a.sampleEditorGrid,children:Object(d.jsxs)(w.a.Row,{children:[Object(d.jsx)(w.a.Column,{children:Object(d.jsx)(_.a,{children:Object(d.jsx)(y.a,{className:"monospace",rows:4,value:e.sample?e.sample.inputData:"",placeholder:t(".content_editor.sample_input"),onChange:function(t,n){var a=n.value;return e.onChangeSampleData("inputData",a)}})})}),Object(d.jsx)(w.a.Column,{children:Object(d.jsx)(_.a,{children:Object(d.jsx)(y.a,{className:"monospace",rows:4,value:e.sample?e.sample.outputData:"",placeholder:t(".content_editor.sample_output"),onChange:function(t,n){var a=n.value;return e.onChangeSampleData("outputData",a)}})})})]})})})]})},oe=function(e){var t=Object(z.i)("problem_edit"),n=Object(z.k)(),a=!e.new&&Object(J.b)(e.problem.meta);Object(j.useEffect)((function(){R.a.enterNewPage(e.new?"".concat(t(".title_new")):"".concat(t(".title_edit")," ").concat(a),"problem_set",!1)}),[R.a.locale,e.new,e.problem]);var o=Object(z.l)(),m=Object(j.useState)(function(){var t={};if(e.new)t[R.a.locale]={title:"",contentSections:X[R.a.locale]};else{var n,a=Object(s.a)(e.problem.localizedContentsOfAllLocales);try{for(a.s();!(n=a.n()).done;){var c=n.value;t[c.locale]={title:c.title,contentSections:c.contentSections.map((function(e){return Object(i.a)({uuid:Object(M.a)()},e)}))}}}catch(o){a.e(o)}finally{a.f()}}return t}()),O=Object(u.a)(m,2),h=O[0],v=O[1],_=Object(j.useState)(V.a.Traditional),y=Object(u.a)(_,2),C=y[0],I=y[1],D=Object(z.d)(),N=Object(u.a)(D,2),L=N[0],q=N[1],F=Object(z.b)(Object(p.a)(r.a.mark((function a(){var c,i,s,l,u,p,d,j;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=Object.keys(h).map((function(e,t,n){return 0===t?xe:e===xe?n[0]:e})).map((function(e){return{locale:e,title:h[e].title,contentSections:h[e].contentSections.map((function(e){return"Text"===e.type?{sectionTitle:e.sectionTitle,type:"Text",text:e.text}:{sectionTitle:e.sectionTitle,type:"Sample",sampleId:e.sampleId,text:e.text}}))}})),!c.some((function(e){return!e.title||e.contentSections.some((function(e){return!e.sectionTitle||"Text"===e.type&&!e.text}))}))){a.next=5;break}return U.a.error(t(".something_empty")),a.abrupt("return");case 5:if(i=re.map((function(e){return{inputData:e.inputData,outputData:e.outputData}})),!e.new){a.next=15;break}return a.next=9,$.c.problem.createProblem({type:C,statement:{localizedContents:c,samples:i,problemTagIds:be}},o("CreateProblem"));case 9:s=a.sent,l=s.requestError,u=s.response,l?U.a.error(l(t)):u.error?U.a.error(t(".error.".concat(u.error))):(q(!1),n.navigate(Object(J.c)(u.id))),a.next=21;break;case 15:return a.next=17,$.c.problem.updateStatement({problemId:e.problem.meta.id,localizedContents:c,samples:i,problemTagIds:be});case 17:p=a.sent,d=p.requestError,j=p.response,d?U.a.error(d(t)):j.error?U.a.error(t(".error.".concat(j.error))):(U.a.success(t(".submit_success")),q(!1));case 21:case"end":return a.stop()}}),a)})))),B=Object(u.a)(F,2),E=B[0],W=B[1];function G(){q(!1),e.new?n.navigate("/p"):n.navigate({pathname:Object(J.c)(e.problem.meta,{use:e.idType}),query:e.requestedLocale?{locale:e.requestedLocale}:null})}function H(){E||(q(!0),ie(A()(re,{$push:[{uuid:Object(M.a)(),inputData:"",outputData:""}]})))}function Q(e){var t=Object(l.a)(re.keys()).find((function(t){return!h[e].contentSections.some((function(e){return e.sampleId===t}))}));return null!=t?t:(H(),re.length)}function Y(e,t,n){E||(q(!0),ie(A()(re,Object(c.a)({},e,Object(c.a)({},t,{$set:n})))))}function Z(e){var t={};Object.keys(h).forEach((function(n){t[n]={contentSections:h[n].contentSections.map((function(t){if("Sample"!==t.type)return{};var n=e(t.sampleId);return n===t.sampleId?{}:null==n?{$unset:["sampleId"],type:{$set:"Text"}}:{sampleId:{$set:e(t.sampleId)}}}))}})),v(A()(h,t))}function ee(e){E||(q(!0),ie(A()(re,{$splice:[[e,0,{uuid:Object(M.a)(),inputData:"",outputData:""}]]})),Z((function(t){return t>=e?t+1:t})))}function te(e,t){if(!E){q(!0);var n=e+("UP"===t?-1:1);Z((function(t){return t===e?n:t===n?e:t})),ie(re.map((function(t,a){return a===e?re[n]:a===n?re[e]:t})))}}var ne=Object(j.useState)(e.new?[{uuid:Object(M.a)(),inputData:"",outputData:""}]:e.problem.samples.map((function(e){return Object(i.a)({uuid:Object(M.a)()},e)}))),oe=Object(u.a)(ne,2),re=oe[0],ie=oe[1],se=Object(j.useState)((function(){var t=e.requestedLocale||R.a.locale;return t in h?t:Object.keys(h)[0]})),le=Object(u.a)(se,2),ue=le[0],pe=le[1],de=Object(j.useState)(e.problem?e.problem.tagsOfLocale.map((function(e){return e.id})):[]),je=Object(u.a)(de,2),be=je[0],me=je[1];var Oe=Object(j.useState)(e.new?R.a.locale:e.problem.meta.locales[0]),fe=Object(u.a)(Oe,2),xe=fe[0],he=fe[1],ge=!!e.new||e.problem.permissionOfCurrentUser.includes("Modify");return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(w.a,{children:[Object(d.jsxs)(w.a.Row,{className:P.a.row,children:[Object(d.jsx)(w.a.Column,{width:11,children:Object(d.jsxs)(k.a,{as:"h1",className:P.a.headerContainer+" withIcon",children:[Object(d.jsx)(x.a,{name:"edit",className:P.a.icon}),e.new?"".concat(t(".header_new")):"".concat(t(".header_edit",{idString:a})),e.new&&Object(d.jsx)(b.a,{compact:!0,className:P.a.typeDropdown,children:Object(d.jsx)(f.a,{item:!0,value:C,options:Object.values(V.a).map((function(e){return{text:t("problem.type.".concat(e)),value:e,key:e}})),onChange:function(e,t){var n=t.value;return I(n)}})}),Object(d.jsx)(g.a,{trigger:Object(d.jsx)(S.a,{className:P.a.backButton,disabled:E,content:t(".back_to_problem"),onClick:function(){return!L&&G()}}),disabled:!L,content:Object(d.jsx)(S.a,{negative:!0,content:t(".confirm_back_to_problem"),onClick:G}),on:"click",position:"bottom center"}),Object(d.jsx)(S.a,{primary:!0,disabled:!ge,loading:E,onClick:W,children:t(ge?".submit":".no_submit_permission")})]})}),Object(d.jsx)(w.a.Column,{width:5,children:Object(d.jsx)(k.a,{icon:"sticky note outline",className:"withIcon",as:"h1",content:t(".header_samples")})})]}),Object(d.jsxs)(w.a.Row,{className:P.a.row,children:[Object(d.jsx)(w.a.Column,{width:11,children:Object(d.jsx)(K.a,{locales:Object.keys(h),activeLocale:ue,item:function(t){var n,a;return Object(d.jsx)(ae,{problemId:null===(n=e.problem)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.id,localizedContent:h[t],samples:re,isOnly:1===Object.keys(h).length,isDefault:xe===t,onMakeDefault:function(){return he(t)},onAddDefaultSections:function(){return function(e){E||(q(!0),0===re.length&&H(),v(A()(h,Object(c.a)({},e,{contentSections:{$set:[].concat(Object(l.a)(X[e]),Object(l.a)(h[e].contentSections.filter((function(e){return!("Text"===e.type&&!e.sectionTitle&&!e.text)}))))}}))))}(t)},onDelete:function(){return function(e){if(!E){q(!0);var t=Object.keys(h);t.some((function(t){if(t!==e)return he(t),!0}));var n=t.indexOf(e);n===t.length-1?pe(t[n-1]):pe(t[n+1]),v(A()(h,{$unset:[e]}))}}(t)},onChangeTitle:function(e){return function(e,t){E||(q(!0),v(A()(h,Object(c.a)({},e,{title:{$set:t}}))))}(t,e)},onChangeSectionValue:function(e,n,a){return function(e,t,n,a){E||(q(!0),v(A()(h,Object(c.a)({},e,{contentSections:Object(c.a)({},t,Object(c.a)({},n,{$set:a}))}))))}(t,e,n,a)},onChangeSectionType:function(e,n){return function(e,t,n){E||(q(!0),v(A()(h,Object(c.a)({},e,{contentSections:Object(c.a)({},t,{type:{$set:n},sampleId:"Sample"===n?{$set:Q(e)}:{},$unset:"Text"===n?["sampleId"]:[]})}))))}(t,e,n)},onChangeSectionSampleId:function(e,n){return function(e,t,n){E||(q(!0),null==n&&(n=re.length,H()),v(A()(h,Object(c.a)({},e,{contentSections:Object(c.a)({},t,{sampleId:{$set:n}})}))))}(t,e,n)},onChangeSampleData:Y,onAddSection:function(e,n){return function(e,t,n){E||(q(!0),v(A()(h,Object(c.a)({},e,{contentSections:{$splice:[[t,0,Object(i.a)({uuid:Object(M.a)(),sectionTitle:"",type:n,text:""},"Sample"===n?{sampleId:Q(e)}:{})]]}}))))}(t,e,n)},onDeleteSection:function(e){return function(e,t){E||(q(!0),v(A()(h,Object(c.a)({},e,{contentSections:{$splice:[[t,1]]}}))))}(t,e)},onMoveSection:function(e,n){return function(e,t,n){if(!E){q(!0);var a=h[e].contentSections[t];v(A()(h,Object(c.a)({},e,{contentSections:{$splice:[[t,1],[t+("UP"===n?-1:1),0,a]]}})))}}(t,e,n)}})},onAddLocale:function(e){E||(q(!0),v(A()(h,Object(c.a)({},e,{$set:{title:"",contentSections:[{uuid:Object(M.a)(),sectionTitle:"",type:"Text",text:""}]}}))),pe(e))},onSetActiveLocale:pe})}),Object(d.jsxs)(w.a.Column,{width:5,children:[0===re.length?Object(d.jsxs)(T.a.Dimmable,{dimmed:!0,className:P.a.noSampleDimmer,children:[Object(d.jsx)(ce,{sampleId:null,sample:null,warningMessage:[],isFirst:null,isLast:null,onChangeSampleData:null,onMoveSampleUp:null,onMoveSampleDown:null,onAddSampleBefore:null,onAddSampleAfter:null,onDeleteSample:null}),Object(d.jsx)(T.a,{active:!0,children:Object(d.jsx)(S.a,{primary:!0,onClick:function(){return H()},children:t(".sample_editor.add_sample_when_empty")})})]}):re.map((function(e,t){return Object(d.jsx)(ce,{sampleId:t,sample:e,warningMessage:Object.keys(h).map((function(e){var n=h[e].contentSections.filter((function(e){return"Sample"===e.type&&e.sampleId===t})).length;return 1===n?null:{locale:e,referenceCount:n}})).filter((function(e){return e})),isFirst:0===t,isLast:t===re.length-1,onChangeSampleData:function(e,n){return Y(t,e,n)},onMoveSampleUp:function(){return te(t,"UP")},onMoveSampleDown:function(){return te(t,"DOWN")},onAddSampleBefore:function(){return ee(t)},onAddSampleAfter:function(){return ee(t+1)},onDeleteSample:function(){return function(e){E||(q(!0),Z((function(t){return t===e?null:t>e?t-1:t})),ie(re.filter((function(t,n){return n!==e}))))}(t)}},e.uuid)})),Object(d.jsx)(k.a,{icon:"tag",className:"withIcon",as:"h1",content:t(".header_tags")}),Object(d.jsx)(f.a,{search:function(e,t){t=t.toLowerCase();var n=e.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t)})).sort((function(e,t){return e.text<t.text?-1:e.text>t.text?1:0}));return[].concat(Object(l.a)(n.filter((function(e){return e.text.toLowerCase().startsWith(t)}))),Object(l.a)(n.filter((function(e){return!e.text.toLowerCase().startsWith(t)}))))},fluid:!0,multiple:!0,value:be,placeholder:t(".tags_placeholder"),selection:!0,noResultsMessage:t(".no_addable_tags"),onChange:function(e,t){var n=t.value;n.length<=20&&(q(!0),me(n))},options:e.allProblemTags.map((function(e){return{key:e.id,value:e.id,text:e.name}}))})]})]})]})})};oe=Object(B.a)(oe);t.default={new:Object(E.c)(function(){var e=Object(p.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return n=e.sent,e.abrupt("return",Object(d.jsx)(oe,{new:!0,allProblemTags:n},Object(M.a)()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),byId:Object(E.c)(function(){var e=Object(p.a)(r.a.mark((function e(t){var n,a,c,o,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=parseInt(t.params.id),a=t.query.locale in q.a&&t.query.locale,e.next=4,Promise.all([Y("id",n),ee()]);case 4:return c=e.sent,o=Object(u.a)(c,2),i=o[0],s=o[1],e.abrupt("return",Object(d.jsx)(oe,{idType:"id",problem:i,allProblemTags:s,requestedLocale:a},Object(M.a)()));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),byDisplayId:Object(E.c)(function(){var e=Object(p.a)(r.a.mark((function e(t){var n,a,c,o,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=parseInt(t.params.displayId),a=t.query.locale in q.a&&t.query.locale,e.next=4,Promise.all([Y("displayId",n),ee()]);case 4:return c=e.sent,o=Object(u.a)(c,2),i=o[0],s=o[1],e.abrupt("return",Object(d.jsx)(oe,{idType:"displayId",problem:i,allProblemTags:s,requestedLocale:a},Object(M.a)()));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}]);
//# sourceMappingURL=81.3f74fc5c.chunk.js.map