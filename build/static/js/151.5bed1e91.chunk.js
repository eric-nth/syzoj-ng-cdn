(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[151],{1561:function(e,t,n){"use strict";n.r(t);var r=n(29),c=n(10),a=n.n(c),s=n(19),o=n(15),i=n(1),l=n(0),u=n(1790),j=n(1803),d=n(618),b=n(1792),p=n(602),h=n(99),O=n(1795),f=n(155),x=n(55),m=n(1562),g=n.n(m),y=n(22),C=n(181),v=n(182),k=n(9),w=n(183),N=n(689),_=n(109);function I(){return H.apply(this,arguments)}function H(){return(H=Object(o.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.c.judgeClient.listJudgeClients();case 2:if(t=e.sent,n=t.requestError,r=t.response,!n){e.next=9;break}throw new w.a(n);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(e){var t=Object(y.i)("judge_machine"),n=Object(y.k)();function r(e){if(e.systemInfo&&e.systemInfo){var t=e.systemInfo,n=!!t.cpu.flags,r=t.cpu.cache&&"object"===typeof t.cpu.cache&&0!==Object.keys(t.cpu.cache).length;return Object(i.jsx)(u.a,{trigger:Object(i.jsx)("span",{children:t.cpu.model}),disabled:!n&&!r,content:Object(i.jsxs)(i.Fragment,{children:[n&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(j.a,{content:"Flags"}),Object(i.jsx)("p",{className:g.a.cpuFlags,children:Object(i.jsx)("code",{children:t.cpu.flags})})]}),r&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(j.a,{content:"Cache"}),Object(i.jsx)("table",{className:g.a.cpuCache,children:Object(i.jsx)("tbody",{children:Object.entries(t.cpu.cache).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{align:"left",className:g.a.cpuCacheName,children:Object(i.jsx)("strong",{children:n})}),Object(i.jsx)("td",{children:Math.round(r/1024)+" KiB"})]},n)}))})})]})]}),hoverable:!0,position:"bottom center"})}return"-"}function c(e){if(e.systemInfo&&e.systemInfo){var t=e.systemInfo;return t.memory.description+" ("+Math.round(t.memory.size/1024)+" MiB)"}return"-"}function x(e){return e.systemInfo&&e.systemInfo?e.systemInfo.kernel:"-"}Object(l.useEffect)((function(){k.a.enterNewPage(t(".title"),null,!1)}),[k.a.locale]);var m=Object(l.useState)(null),w=Object(s.a)(m,2),I=w[0],H=w[1];function P(){return(P=Object(o.a)(a.a.mark((function e(r){var c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.c.judgeClient.resetJudgeClientKey({id:r});case 2:c=e.sent,s=c.requestError,o=c.response,s?v.a.error(s(t)):o.error?v.a.error(t(".error.".concat(o.error))):(v.a.success(t(".reset_key_success")),n.refresh(),H(null));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=Object(l.useState)(null),J=Object(s.a)(F,2),M=J[0],E=J[1];function S(){return(S=Object(o.a)(a.a.mark((function e(r){var c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.c.judgeClient.deleteJudgeClient({id:r});case 2:c=e.sent,s=c.requestError,o=c.response,s?v.a.error(s(t)):o.error?v.a.error(t(".error.".concat(o.error))):(v.a.success(t(".delete_success")),n.refresh(),E(null));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=Object(l.useState)(!1),B=Object(s.a)(q,2),z=B[0],K=B[1],A=Object(l.useState)(""),R=Object(s.a)(A,2),W=R[0],D=R[1],G=W.length>=1&&W.length<=80,L=Object(y.b)(Object(o.a)(a.a.mark((function e(){var r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,C.c.judgeClient.addJudgeClient({name:W,allowedHosts:[]});case 4:r=e.sent,c=r.requestError,s=r.response,c?v.a.error(c(t)):s.error?v.a.error(t(".error.".concat(s.error))):(v.a.success(t(".add_success")),n.refresh()),K(!1),D("");case 10:case"end":return e.stop()}}),e)})))),Q=Object(s.a)(L,2),T=Q[0],U=Q[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:g.a.headerWrapper,children:[Object(i.jsx)(j.a,{as:"h1",icon:"server",className:g.a.header+" withIcon",content:t(".header")}),Object(i.jsx)(d.a,{icon:"refresh",content:t(".refresh"),labelPosition:"left",onClick:function(){return n.refresh()}}),e.hasManagePermission&&Object(i.jsx)(u.a,{open:z||T,onOpen:function(){return K(!0)},onClose:function(){return K(!1)},content:Object(i.jsxs)(b.a,{children:[Object(i.jsx)(b.a.Input,{style:{width:230},placeholder:t(".add_new_name"),value:W,onChange:function(e,t){var n=t.value;return D(n)},onKeyPress:Object(N.a)((function(){return G&&U()}))}),Object(i.jsx)(d.a,{loading:T,disabled:!G,onClick:U,children:t(".confirm_add")})]}),trigger:Object(i.jsx)(d.a,{className:g.a.addButton,icon:"plus",content:t(".add"),labelPosition:"left",primary:!0}),on:"click",position:"bottom right"})]}),e.judgeClients.length?Object(i.jsxs)(O.a,{children:[Object(i.jsx)(O.a.Header,{children:Object(i.jsxs)(O.a.Row,{children:[Object(i.jsx)(O.a.HeaderCell,{className:g.a.nowrap,children:t(".status")}),Object(i.jsx)(O.a.HeaderCell,{className:g.a.nowrap,children:t(".name")}),Object(i.jsx)(O.a.HeaderCell,{children:t(".cpu")}),Object(i.jsx)(O.a.HeaderCell,{children:t(".memory")}),Object(i.jsx)(O.a.HeaderCell,{className:g.a.nowrap,children:t(".kernel")}),e.hasManagePermission&&Object(i.jsx)(O.a.HeaderCell,{textAlign:"center",className:g.a.columnOperations,children:t(".operations")})]})}),Object(i.jsx)(O.a.Body,{children:e.judgeClients.map((function(n){return Object(i.jsxs)(O.a.Row,{children:[Object(i.jsx)(O.a.Cell,{className:g.a.nowrap,children:Object(i.jsxs)("div",{className:g.a.status,children:[Object(i.jsx)(f.a,{className:g.a.onlineStatus,circular:!0,color:n.online?"green":"red",empty:!0}),n.online?t(".online"):t(".offline")]})}),Object(i.jsx)(_.a,{children:Object(i.jsx)(O.a.Cell,{className:g.a.nowrap,children:n.name})}),Object(i.jsx)(O.a.Cell,{children:r(n)}),Object(i.jsx)(O.a.Cell,{children:c(n)}),Object(i.jsx)(O.a.Cell,{className:g.a.nowrap,children:x(n)}),e.hasManagePermission&&Object(i.jsxs)(O.a.Cell,{textAlign:"center",className:g.a.columnOperations,children:[Object(i.jsx)(u.a,{trigger:Object(i.jsx)(h.a,{name:"key",title:t(".key")}),content:Object(i.jsx)("code",{children:n.key}),on:"click",position:"left center"}),Object(i.jsx)(u.a,{open:I===n.id,onOpen:function(){return H(n.id)},onClose:function(){return H(null)},trigger:Object(i.jsx)(h.a,{name:"refresh",title:t(".reset_key")}),content:Object(i.jsx)(d.a,{negative:!0,content:t(".confirm_reset_key"),onClick:function(){return function(e){return P.apply(this,arguments)}(n.id)}}),on:"click",position:"left center"}),Object(i.jsx)(u.a,{open:M===n.id,onOpen:function(){return E(n.id)},onClose:function(){return E(null)},trigger:Object(i.jsx)(h.a,{name:"delete",title:t(".delete")}),content:Object(i.jsx)(d.a,{negative:!0,content:t(".confirm_delete"),onClick:function(){return function(e){return S.apply(this,arguments)}(n.id)}}),on:"click",position:"left center"})]})]},n.id)}))})]}):Object(i.jsx)(p.a,{placeholder:!0,children:Object(i.jsxs)(j.a,{icon:!0,children:[Object(i.jsx)(h.a,{name:"server"}),t(".no_judge_machine")]})})]})};P=Object(x.a)(P),t.default=Object(w.c)(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i.jsx,e.t1=P,e.t2=r.a,e.t3={},e.next=6,I();case 6:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.abrupt("return",(0,e.t0)(e.t1,e.t5));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=151.5bed1e91.chunk.js.map