(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[165],{1700:function(e,r,t){"use strict";t.r(r);var n,a,s=t(10),c=t.n(s),u=t(29),i=t(179),o=t(15),l=t(19),b=t(1),m=t(0),j=t(1792),d=t(99),p=t(618),g=t(602),O=t(1803),y=t(1795),f=t(55),x=t(1799),h=t(1035),v=t(1551),I=t.n(v),E=t(181),q=t(9),N=t(22),L=t(182),C=t(701);!function(e){e.Accepted="Accepted",e.PartiallyCorrect="PartiallyCorrect",e.WrongAnswer="WrongAnswer",e.RuntimeError="RuntimeError",e.TimeLimitExceeded="TimeLimitExceeded",e.MemoryLimitExceeded="MemoryLimitExceeded",e.CompilationError="CompilationError",e.FileError="FileError",e.OutputLimitExceeded="OutputLimitExceeded",e.JudgementFailed="JudgementFailed",e.ConfigurationError="ConfigurationError",e.SystemError="SystemError",e.Canceled="Canceled",e.Pending="Pending"}(n||(n={})),function(e){e.Pending="Pending",e.ConfigurationError="ConfigurationError",e.SystemError="SystemError",e.Canceled="Canceled",e.CompilationError="CompilationError",e.FileError="FileError",e.RuntimeError="RuntimeError",e.TimeLimitExceeded="TimeLimitExceeded",e.MemoryLimitExceeded="MemoryLimitExceeded",e.OutputLimitExceeded="OutputLimitExceeded",e.PartiallyCorrect="PartiallyCorrect",e.WrongAnswer="WrongAnswer",e.Accepted="Accepted",e.JudgementFailed="JudgementFailed",e.Waiting="Waiting",e.Preparing="Preparing",e.Compiling="Compiling",e.Running="Running",e.Skipped="Skipped"}(a||(a={}));var S=t(686),k=t(721),P=t(860),A=t(737),R=t(183),w=t(1036),F=q.a.serverPreference.pagination.submissions;function M(e){var r={problemId:Number(e.problemId)?Number(e.problemId):null,problemDisplayId:Number(e.problemDisplayId)&&!Number(e.problemId)?Number(e.problemDisplayId):null,submitter:Object(S.f)(e.submitter)?e.submitter:null,codeLanguage:Object.values(C.a).includes(e.codeLanguage)?e.codeLanguage:null,status:e.status in n?e.status:null,minId:Number.isSafeInteger(Number(e.minId))?Number(e.minId):null,maxId:Number.isSafeInteger(Number(e.maxId))?Number(e.maxId):null};return Object.fromEntries(Object.entries(r).filter((function(e){var r=Object(l.a)(e,2);r[0];return null!=r[1]})))}function _(e){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(c.a.mark((function e(r){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.c.submission.querySubmission(Object(u.a)(Object(u.a)({},r),{},{locale:q.a.locale,takeCount:F}));case 2:if(t=e.sent,n=t.requestError,a=t.response,!n){e.next=7;break}throw new R.a(n,{showRefresh:!0,showBack:!0});case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){var r=Object(N.i)("submissions"),t=Object(N.k)();Object(m.useEffect)((function(){q.a.enterNewPage(r(".title"),"submissions")}),[q.a.locale]),Object(m.useEffect)((function(){e.queryResult.error&&L.a.error(r(".query_error.".concat(e.queryResult.error)))}),[]);var a=Object(m.useState)(e.query.problemDisplayId?e.query.problemDisplayId.toString():e.query.problemId?"P"+e.query.problemId:""),s=Object(l.a)(a,2),c=s[0],o=s[1],f=Object(N.g)(c,(function(e){return!(!e.toUpperCase().startsWith("P")||!Number.isSafeInteger(Number(e.substr(1))))||!!Number.isSafeInteger(Number(e))})),x=Object(l.a)(f,2),v=x[0],E=x[1],R=Object(m.useState)(e.query.submitter||""),F=Object(l.a)(R,2),M=F[0],_=F[1],W=Object(N.g)(M,(function(e){return!e||Object(S.f)(e)})),D=Object(l.a)(W,2),T=D[0],B=D[1],U=Object(m.useState)(e.query.codeLanguage),J=Object(l.a)(U,2),z=J[0],H=J[1],K=Object(m.useState)(e.query.status),V=Object(l.a)(K,2),G=V[0],Q=V[1];function X(e){if(!v())return L.a.error(r(".query_error.INVALID_PROBLEM_ID"));if(!e&&!T())return L.a.error(r(".query_error.INVALID_USERNAME"));var n={};c&&c.toUpperCase().startsWith("P")&&(n.problemId=Number(c.substr(1))),c&&!c.toUpperCase().startsWith("P")&&(n.problemDisplayId=Number(c)),e?n.submitter=q.a.currentUser.username:M&&(n.submitter=M),z&&(n.codeLanguage=z),G&&(n.status=G),t.navigate({query:Object.fromEntries(Object.entries(n).map((function(e){var r=Object(l.a)(e,2);return[r[0],r[1].toString()]})))})}var Y=Object(m.useState)(e.queryResult.submissions||[]),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],re=e.queryResult.progressSubscriptionKey,te=Object(m.useRef)();Object(N.n)("submission-progress",{subscriptionKey:re},(function(e){e.on("message",(function(e,r){var t=te.current,n=t.get(e);n=Object(h.patch)(n,r),t.set(e,n),ee((function(r){var t=Object(i.a)(r);for(var a in t)if(e===t[a].id){n.progressMeta.resultMeta?(delete t[a].progressType,t[a]=Object(u.a)(Object(u.a)({},t[a]),n.progressMeta.resultMeta)):t[a]=Object(u.a)(Object(u.a)({},t[a]),{},{progressType:n.progressMeta.progressType});break}return t}))}))}),(function(){console.log("connected"),te.current=new Map}),!!re);var ne=e.queryResult.hasLargerId,ae=e.queryResult.hasSmallerId;var se=Object(N.m)(1024,1/0),ce=Object(N.m)(0,768);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(j.a,{className:I.a.queryForm,children:Object(b.jsxs)(j.a.Group,{inline:!0,unstackable:!0,children:[Object(b.jsx)(j.a.Input,{className:I.a.queryInputProblemId,icon:"hashtag",iconPosition:"left",placeholder:r(".query.problem_id"),value:c,onChange:function(e,r){var t=r.value;return o(t)},onBlur:v,error:E}),Object(b.jsx)(j.a.Input,{className:I.a.queryInputSubmitter,icon:"user",iconPosition:"left",placeholder:r(".query.submitter"),value:M,onChange:function(e,r){var t=r.value;return _(t)},onBlur:T,error:B}),Object(b.jsx)(j.a.Select,{className:I.a.queryInputCodeLanguage+" "+I.a.select+(z?"":" "+I.a.selectedAll),value:z||"ALL",onChange:function(e,r){var t=r.value;return H("ALL"===t?null:t)},options:[{key:"",value:"ALL",text:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{name:"code"}),Object(b.jsx)("span",{className:I.a.notInMenu,children:r(".query.code_language")}),Object(b.jsx)("span",{className:I.a.inMenu,children:r(".query.code_language_all")})]})}].concat(Object(i.a)(Object.keys(C.d).map((function(e){return{key:e,value:e,text:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{name:"code"}),r("code_language.".concat(e,".name"))]})}}))))}),Object(b.jsx)(j.a.Select,{className:I.a.queryInputStatus+" "+I.a.select+(G?"":" "+I.a.selectedAll),value:G||"ALL",onChange:function(e,r){var t=r.value;return Q("ALL"===t?null:t)},options:[{key:"",value:"ALL",text:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{name:"question"}),Object(b.jsx)("span",{className:I.a.notInMenu,children:r(".query.status")}),Object(b.jsx)("span",{className:I.a.inMenu,children:r(".query.status_all")})]})}].concat(Object(i.a)(Object.values(n).map((function(e){return{key:e,value:e,text:Object(b.jsx)(k.b,{status:e})}}))))}),Object(b.jsx)(p.a,{className:I.a.queryButton+(se?" labeled icon":""),icon:"search",content:se?r(".query.filter"):null,onClick:function(){return X(!1)}}),q.a.currentUser&&Object(b.jsx)(p.a,{className:(se?"labeled icon ":"")+I.a.mySubmissions,primary:!0,icon:"user",content:se?r(".query.my_submissions"):null,onClick:function(){return X(!0)}})]})}),0===$.length?Object(b.jsxs)(g.a,{placeholder:!0,children:[Object(b.jsx)(O.a,{icon:!0,children:Object.values(e.query).some((function(e){return e}))?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{name:"search"}),r(".empty.message_filtered")]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{name:"file"}),r(".empty.message_not_filtered")]})}),Object(b.jsx)(g.a.Inline,{children:Object(b.jsx)(p.a,{primary:!0,onClick:function(){return t.goBack()},children:r(".empty.goback")})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(y.a,{textAlign:"center",basic:"very",className:I.a.table,unstackable:!0,fixed:!0,children:[ce?Object(b.jsx)(y.a.Header,{children:Object(b.jsx)(P.b,{})}):Object(b.jsx)(y.a.Header,{children:Object(b.jsx)(P.a,{page:"submissions"})}),Object(b.jsx)(y.a.Body,{children:$.map((function(e){var r=null;if("Pending"===e.status)switch(e.progressType){case w.a.Preparing:r="Preparing";break;case w.a.Compiling:r="Compiling";break;case w.a.Running:r="Running";break;default:r="Waiting"}return ce?Object(b.jsx)(P.e,{submission:Object(u.a)(Object(u.a)({},e),{},{status:r||e.status})},e.id):Object(b.jsx)(P.c,{submission:Object(u.a)(Object(u.a)({},e),{},{status:r||e.status}),page:"submissions"},e.id)}))})]}),(ne||ae)&&Object(b.jsx)("div",{className:I.a.pagination,children:Object(b.jsx)(A.b,{hasPrevPage:ne,hasNextPage:ae,pageUrl:function(r){var t=Object.assign({},e.query);return-1===r?(t.minId=$[0].id+1,delete t.maxId):(t.maxId=$[$.length-1].id-1,delete t.minId),{query:Object.fromEntries(Object.entries(t).map((function(e){var r=Object(l.a)(e,2);return[r[0],r[1].toString()]})))}}})})]})]})};D=Object(f.a)(D);r.default=Object(R.c)(function(){var e=Object(o.a)(c.a.mark((function e(r){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M(r.query),e.next=3,_(t);case 3:return n=e.sent,e.abrupt("return",Object(b.jsx)(D,{query:t,queryResult:n},Object(x.a)()));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=165.c9620a25.chunk.js.map