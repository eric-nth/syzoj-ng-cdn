(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[146],{1419:function(e,r,t){"use strict";t.r(r);var n=t(29),a=t(10),c=t.n(a),s=t(15),u=t(19),o=t(1),i=t(0),l=t(1803),f=t(1792),b=t(602),j=t(593),p=t(1725),d=t(618),O=t(99),m=t(617),g=t(14),x=t(39),v=t(55),h=t(843),_=t.n(h),k=t(9),y=t(181),w=t(22),C=t(182),E=t(686),R=t(185),S=t(755),P=t(689),A=function(){var e=Object(w.i)("register"),r=Object(x.e)(),t=Object(w.k)(),a=function(){t.navigate(r.url.query.loginRedirectUrl||"/")},g=Object(w.j)();Object(i.useEffect)((function(){k.a.currentUser&&a()}),[]),Object(i.useEffect)((function(){k.a.enterNewPage(e(".title"))}),[k.a.locale]);var v=Object(w.l)(),h=Object(i.useState)(null),A=Object(u.a)(h,2),I=A[0],q=A[1],L=Object(i.useState)(""),N=Object(u.a)(L,2),F=N[0],V=N[1],D=Object(i.useState)(""),M=Object(u.a)(D,2),T=M[0],B=M[1],K=Object(i.useState)(""),U=Object(u.a)(K,2),z=U[0],G=U[1],J=Object(i.useState)(""),Y=Object(u.a)(J,2),H=Y[0],Q=Y[1],W=Object(i.useState)(""),X=Object(u.a)(W,2),Z=X[0],$=X[1],ee=Object(i.useState)(!1),re=Object(u.a)(ee,2),te=re[0],ne=re[1],ae=Object(i.useRef)(),ce=Object(i.useRef)(),se=Object(i.useRef)(),ue=Object(i.useRef)(),oe=Object(i.useRef)(),ie=Object(i.useRef)(null),le=Object(w.f)(F,!1,!1,(function(r){return r?!!Object(E.f)(r)||e(".invalid_username"):e(".empty_username")}),function(){var r=Object(s.a)(c.a.mark((function r(t){var n,a,s;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.c.auth.checkAvailability({username:t});case 2:if(n=r.sent,a=n.requestError,s=n.response,!a){r.next=8;break}return C.a.error(a(e)),r.abrupt("return","");case 8:if(s.usernameAvailable){r.next=10;break}return r.abrupt("return",e(".username_already_taken"));case 10:return r.abrupt("return",!0);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),fe=Object(u.a)(le,4),be=fe[0],je=fe[1],pe=fe[2],de=fe[3],Oe=Object(w.f)(T,!1,!1,(function(r){return r?!!Object(E.b)(r)||e(".invalid_email"):e(".empty_email")}),function(){var r=Object(s.a)(c.a.mark((function r(t){var n,a,s;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.c.auth.checkAvailability({email:t});case 2:if(n=r.sent,a=n.requestError,s=n.response,!a){r.next=8;break}return C.a.error(a(e)),r.abrupt("return","");case 8:if(s.emailAvailable){r.next=10;break}return r.abrupt("return",e(".email_already_used"));case 10:return r.abrupt("return",!0);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),me=Object(u.a)(Oe,4),ge=me[0],xe=me[1],ve=me[2],he=me[3],_e=Object(w.f)(H,!1,!1,(function(r){return r?!!Object(E.e)(r)||e(".invalid_password"):e(".empty_password")})),ke=Object(u.a)(_e,5),ye=ke[0],we=ke[1],Ce=ke[2],Ee=ke[3],Re=ke[4],Se=Object(w.f)(Z,!0,!1,(function(r){return r!==Re()?e(".passwords_do_not_match"):!!r||e(".empty_password")})),Pe=Object(u.a)(Se,4),Ae=Pe[0],Ie=Pe[1],qe=Pe[2],Le=Pe[3],Ne=Object(i.useState)(!1),Fe=Object(u.a)(Ne,2),Ve=Fe[0],De=Fe[1];function Me(){return Te.apply(this,arguments)}function Te(){return(Te=Object(s.a)(c.a.mark((function r(){var t,n,u;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!te){r.next=2;break}return r.abrupt("return");case 2:return ne(!0),r.next=5,je();case 5:if(r.sent){r.next=11;break}C.a.error(e(".username_unavailable_message")),ae.current.focus(),ae.current.select(),r.next=72;break;case 11:return r.next=13,xe();case 13:if(r.sent){r.next=19;break}C.a.error(e(".email_unavailable_message")),ce.current.focus(),ce.current.select(),r.next=72;break;case 19:return r.next=21,we();case 21:if(r.sent){r.next=27;break}C.a.error(e(".invalid_password_message")),ue.current.focus(),ue.current.select(),r.next=72;break;case 27:return r.next=29,Ie();case 29:if(r.sent){r.next=35;break}C.a.error(e(".passwords_do_not_match_message")),oe.current.focus(),oe.current.select(),r.next=72;break;case 35:return r.next=37,y.c.auth.register({username:F,email:T,emailVerificationCode:z,password:H},v("Register"));case 37:if(t=r.sent,n=t.requestError,u=t.response,!n){r.next=44;break}C.a.error(n(e)),r.next=72;break;case 44:if(!u.error){r.next=68;break}r.t0=u.error,r.next="ALREADY_LOGGEDIN"===r.t0?48:"DUPLICATE_USERNAME"===r.t0?50:"DUPLICATE_EMAIL"===r.t0?56:"INVALID_EMAIL_VERIFICATION_CODE"===r.t0?62:66;break;case 48:return C.a.error(e(".errors.".concat(u.error))),r.abrupt("break",66);case 50:return C.a.error(e(".errors.".concat(u.error))),r.next=53,je(!0);case 53:return ae.current.focus(),ae.current.select(),r.abrupt("break",66);case 56:return C.a.error(e(".errors.".concat(u.error))),r.next=59,xe(!0);case 59:return ce.current.focus(),ce.current.select(),r.abrupt("break",66);case 62:return C.a.error(e(".errors.".concat(u.error))),De(!0),se.current.focus(),r.abrupt("break",66);case 66:r.next=72;break;case 68:return k.a.token=u.token,q(e(".success",{username:F})),setTimeout(Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.b)();case 2:a();case 3:case"end":return e.stop()}}),e)}))),1e3),r.abrupt("return");case 72:ne(!1);case 73:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var Be=Object(i.useState)(0),Ke=Object(u.a)(Be,2),Ue=Ke[0],ze=Ke[1],Ge=Object(i.useState)(!1),Je=Object(u.a)(Ge,2),Ye=Je[0],He=Je[1];function Qe(){return We.apply(this,arguments)}function We(){return(We=Object(s.a)(c.a.mark((function r(){var t,n,a;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Ye){r.next=2;break}return r.abrupt("return");case 2:return He(!0),r.next=5,xe();case 5:if(r.sent){r.next=11;break}C.a.error(e(".email_unavailable_message")),ce.current.focus(),ce.current.select(),r.next=17;break;case 11:return r.next=13,y.c.auth.sendEmailVerificationCode({email:T,type:"Register",locale:k.a.locale},v("SendEmailVerifactionCode_Register"));case 13:t=r.sent,n=t.requestError,a=t.response,n?C.a.error(n(e)):a.error?C.a.error(e(".errors.".concat(a.error),{errorMessage:a.errorMessage})):(C.a.success(e(".email_verification_code_sent")),ze(61));case 17:He(!1);case 18:case"end":return r.stop()}}),r)})))).apply(this,arguments)}Object(i.useEffect)((function(){var e=setInterval((function(){ze((function(e){return e&&e-1}))}),1e3);return function(){return clearInterval(e)}}),[]);var Xe=k.a.appLogoThemed&&Object(o.jsx)("img",Object(n.a)({className:_.a.logo},k.a.appLogoThemed));return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:_.a.wrapper,children:[Object(o.jsxs)(l.a,{as:"h2",className:_.a.header+(Xe?" "+_.a.withLogo:""),textAlign:"center",children:[Xe,e(".register_new_account")]}),Object(o.jsx)(f.a,{size:"large",ref:ie,children:Object(o.jsxs)(b.a,{children:[Object(o.jsx)(j.a,{innerRef:function(e){return e&&(ae.current=e.querySelector("input"))},children:Object(o.jsx)(f.a.Field,{control:p.a,error:"error"===pe()&&{content:de(),pointing:"left"},loading:"validating"===pe(),fluid:!0,icon:"user",iconPosition:"left",placeholder:e(".username"),value:F,autoComplete:"username",onChange:function(e){return V(e.target.value)},onBlur:function(){return be()},onKeyPress:Object(P.a)((function(){return ce.current.focus()}))})}),Object(o.jsx)(j.a,{innerRef:function(e){return e&&(ce.current=e.querySelector("input"))},children:Object(o.jsx)(f.a.Field,{control:p.a,error:"error"===ve()&&{content:he(),pointing:"left"},loading:"validating"===ve(),fluid:!0,icon:"envelope",iconPosition:"left",placeholder:e(".email"),value:T,autoComplete:"email",onChange:function(e){return B(e.target.value)},onBlur:function(){return ge()},onKeyPress:Object(P.a)((function(){k.a.serverPreference.security.requireEmailVerification?(se.current.focus(),0===Ue&&Qe()):ue.current.focus()}))})}),k.a.serverPreference.security.requireEmailVerification&&Object(o.jsx)(j.a,{innerRef:function(e){return e&&(se.current=e.querySelector("input"))},children:Object(o.jsx)(f.a.Field,{control:p.a,error:Ve&&{content:e(".invalid_email_verification_code"),pointing:"left"},fluid:!0,icon:"shield",iconPosition:"left",placeholder:e(".email_verification_code"),value:z,autoComplete:"off",onChange:function(e){return r=e.target.value,De(!1),void G(Object(E.g)(r));var r},onKeyPress:Object(P.a)((function(){return ue.current.focus()})),action:Object(o.jsx)(d.a,{tabIndex:-1,disabled:0!==Ue,loading:Ye,content:Ue?"".concat(Ue>60?60:Ue,"s"):e(".send_email_verification_code"),onClick:Qe})})}),Object(o.jsx)(j.a,{innerRef:function(e){return e&&(ue.current=e.querySelector("input"))},children:Object(o.jsx)(f.a.Field,{control:p.a,error:"error"===Ce()&&{content:Ee(),pointing:"left"},loading:"validating"===Ce(),fluid:!0,icon:"lock",iconPosition:"left",placeholder:e(".password"),value:H,type:"password",autoComplete:"new-password",onChange:function(e){return Q(e.target.value)},onBlur:function(){return ye()},onKeyPress:Object(P.a)((function(){return oe.current.focus()}))})}),Object(o.jsx)(j.a,{innerRef:function(e){return e&&(oe.current=e.querySelector("input"))},children:Object(o.jsx)(f.a.Field,{control:p.a,error:"error"===qe()&&{content:Le(),pointing:"left"},loading:"validating"===qe(),fluid:!0,icon:"lock",iconPosition:"left",placeholder:e(".retype_password"),value:Z,type:"password",autoComplete:"new-password",onChange:function(e){return $(e.target.value)},onBlur:function(){return Ae()},onKeyPress:Object(P.a)((function(){Ae(),Me()}))})}),v.getCopyrightMessage(_.a.recaptchaCopyright),Object(o.jsx)(d.a,{className:I&&_.a.successButton,primary:!I,color:I?"green":null,fluid:!0,size:"large",loading:te&&!I,onClick:function(){return Me()},children:I?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O.a,{name:"checkmark"}),I]}):e(".register")})]})}),Object(o.jsxs)(m.a,{className:_.a.message,children:[e(".already_have_account"),Object(o.jsx)(S.a,{onClick:function(){return g("login")},children:e(".login")})]})]})})};A=Object(v.a)(A),r.default=Object(g.j)({view:Object(o.jsx)(A,{})})}}]);
//# sourceMappingURL=146.3d9ec763.chunk.js.map