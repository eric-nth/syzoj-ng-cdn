(self["webpackJsonpsyzoj-ng-app"]=self["webpackJsonpsyzoj-ng-app"]||[]).push([[102],{1018:function(e,t,r){"use strict";r.r(t);var n=r(80),a=r(10),c=r.n(a),s=r(19),o=r(15),i=r(1),u=r(0),b=r(1803),l=r(617),p=r(1790),j=r(618),d=r(1701),m=r(1792),O=r(614),f=r(55),h=r(930),x=r(1799),g=r(1443),y=r.n(g),w=r(1444),v=r.n(w),k=r(181),_=r(9),I=r(22),C=r(182),N=r(756),E=r(698),P=r(183),S=r(849),D=r(684),T=r(37);function J(e,t){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(c.a.mark((function e(t,r){var a,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.c.problem.getProblem((a={},Object(n.a)(a,t,r),Object(n.a)(a,"judgeInfo",!0),Object(n.a)(a,"testData",!0),Object(n.a)(a,"permissionOfCurrentUser",!0),a));case 2:if(s=e.sent,o=s.requestError,i=s.response,!o){e.next=9;break}throw new P.a(o,{showRefresh:!0,showBack:!0});case 9:if(!i.error){e.next=11;break}throw new P.a(Object(T.c)("problem_judge_settings.error.".concat(i.error)));case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(e){var t=Object(I.i)("problem_judge_settings"),r=Object(I.k)(),n=Object(D.b)(e.problem.meta);Object(u.useEffect)((function(){_.a.enterNewPage("".concat(t(".title")," ").concat(n),"problem_set",!1)}),[_.a.locale,e.problem]);var a=e.ProblemTypeEditorComponent;function f(t){return a.parseJudgeInfo(t,e.problem.testData)}function g(e){var t=y()(e);return a.normalizeJudgeInfo(t),t}var w=Object(u.useState)(f(e.problem.judgeInfo)),P=Object(s.a)(w,2),T=P[0],J=P[1],F=Object(u.useState)(e.problem.submittable),U=Object(s.a)(F,2),B=U[0],q=U[1],z=Object(u.useState)(Object(x.a)()),A=Object(s.a)(z,2),G=A[0],M=A[1],R=Object(u.useState)(!1),L=Object(s.a)(R,2),V=L[0],H=L[1],K=Object(I.d)(),Q=Object(s.a)(K,2),W=Q[0],X=Q[1];function Y(){X(!1),r.navigate(Object(D.c)(e.problem.meta,{use:e.idType}))}function Z(){return(Z=Object(o.a)(c.a.mark((function r(){var n,a,s;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!V){r.next=2;break}return r.abrupt("return");case 2:return H(!0),r.next=5,k.c.problem.updateProblemJudgeInfo({problemId:e.problem.meta.id,judgeInfo:g(T),submittable:B});case 5:n=r.sent,a=n.requestError,s=n.response,a?C.a.error(a(t)):s.error?"INVALID_JUDGE_INFO"===s.error?C.a.error(t(".error.INVALID_JUDGE_INFO.".concat(s.judgeInfoError[0]),s.judgeInfoError)):C.a.error(t(".error.".concat(s.error))):(C.a.success(t(".submit_success")),X(!1)),H(!1);case 10:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var $=Object(u.useState)(h.a.dump(g(T))),ee=Object(s.a)($,2),te=ee[0],re=ee[1],ne=Object(I.d)(),ae=Object(s.a)(ne,2),ce=ae[0],se=ae[1],oe=Object(u.useState)(""),ie=Object(s.a)(oe,2),ue=ie[0],be=ie[1];function le(){se(!1),pe.close()}var pe=Object(I.e)({},Object(i.jsx)(b.a,{icon:"code",content:t(".edit_raw.edit_raw")}),Object(i.jsxs)(i.Fragment,{children:[ue&&Object(i.jsx)(l.a,{className:v.a.dialogMessage,error:!0,header:t(".edit_raw.parse_error"),content:Object(i.jsx)("p",{children:Object(i.jsx)("code",{children:ue.trimEnd()})})}),Object(i.jsx)(N.a,{className:v.a.codeEditor,value:te,language:"yaml",onChange:function(e){se(!0),re(e)}})]}),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{trigger:Object(i.jsx)(j.a,{content:t(".edit_raw.cancel"),onClick:function(){return!ce&&le()}}),content:Object(i.jsx)(j.a,{negative:!0,content:t(".edit_raw.confirm_cancel"),onClick:function(){return le()}}),disabled:!ce,position:"top center",on:"click"}),Object(i.jsx)(j.a,{positive:!0,content:t(".edit_raw.ok"),onClick:function(){try{var e=f(h.a.load(te));J(e),X(!0),M(Object(x.a)()),le()}catch(t){be(t.message)}}})]})),je=Object(u.useState)(e.problem.meta.type),de=Object(s.a)(je,2),me=de[0],Oe=de[1],fe=Object(u.useState)(!1),he=Object(s.a)(fe,2),xe=he[0],ge=he[1];function ye(){return(ye=Object(o.a)(c.a.mark((function n(){var a,s,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!V){n.next=2;break}return n.abrupt("return");case 2:if(H(!0),me!==e.problem.meta.type){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,k.c.problem.changeProblemType({problemId:e.problem.meta.id,type:me});case 7:a=n.sent,s=a.requestError,o=a.response,ge(!1),s?C.a.error(s(t)):o.error?C.a.error(t(".error.".concat(o.error))):(C.a.success(t(".switch_type_success")),r.refresh()),H(!1);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(i.jsxs)(i.Fragment,{children:[pe.element,Object(i.jsx)(d.a,{children:Object(i.jsxs)(d.a.Row,{children:[Object(i.jsx)(d.a.Column,{width:7,children:Object(i.jsxs)("div",{className:v.a.leftContainer,children:[Object(i.jsxs)("div",{className:v.a.header,children:[Object(i.jsx)(b.a,{className:"withIcon",icon:"setting",as:"h1",content:t(".header")+" "+n}),Object(i.jsx)(p.a,{trigger:Object(i.jsx)(j.a,{className:v.a.backButton,disabled:V,content:t(".back_to_problem"),onClick:function(){return!W&&Y()}}),disabled:!W,content:Object(i.jsx)(j.a,{negative:!0,content:t(".confirm_back_to_problem"),onClick:Y}),on:"click",position:"bottom center"}),Object(i.jsx)(j.a,{className:v.a.submitButton,primary:!0,loading:V,disabled:!e.problem.permissionOfCurrentUser.includes("Modify"),content:e.problem.permissionOfCurrentUser.includes("Modify")?t(".submit"):t(".no_submit_permission"),onClick:function(){return Z.apply(this,arguments)}})]}),Object(i.jsx)(E.b,{className:v.a.yamlCodeBox,segmentClassName:v.a.yamlSegment,code:h.a.dump(g(T)),language:"yaml",children:Object(i.jsx)(j.a,{className:"icon labeled",id:v.a.buttonEditRaw,icon:"code",content:t(".edit_raw.edit_raw"),onClick:function(){be(""),re(h.a.dump(g(T))),pe.open()}})})]})}),Object(i.jsxs)(d.a.Column,{width:9,children:[Object(i.jsx)(m.a,{className:v.a.problemTypeForm,children:Object(i.jsxs)(m.a.Group,{inline:!0,children:[Object(i.jsxs)(m.a.Field,{inline:!0,width:16,className:v.a.field,children:[Object(i.jsx)("label",{className:v.a.label,children:t(".problem_type")}),Object(i.jsx)(O.a,{className:v.a.dropdown,selection:!0,value:me,options:Object.values(S.a).map((function(e){return{key:e,value:e,text:t("problem.type.".concat(e))}})),onChange:function(e,t){var r=t.value;return Oe(r)}}),Object(i.jsx)(p.a,{trigger:Object(i.jsx)(j.a,{disabled:V||me===e.problem.meta.type,className:v.a.switchButton,content:t(".switch_type")}),content:Object(i.jsx)(j.a,{negative:!0,content:t(".confirm_switch_type"),onClick:function(){return ye.apply(this,arguments)}}),open:xe,onOpen:function(){return ge(!0)},onClose:function(){return ge(!1)},position:"top center",on:"click"})]}),Object(i.jsx)(m.a.Checkbox,{inline:!0,toggle:!0,className:v.a.submittable,label:t(".submittable"),checked:B,onChange:function(e,t){var r=t.checked;X(!0),q(r)}})]})}),Object(i.jsx)(a,{pending:V,judgeInfo:T,testData:e.problem.testData,onUpdateJudgeInfo:function(e,t){V||(t||X(!0),J((function(t){return Object.assign({},t,"function"===typeof e?e(t):e)})))}},G)]})]})})]})};function B(e){return q.apply(this,arguments)}function q(){return(q=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){switch(t){case S.a.Traditional:return Promise.all([r.e(74),r.e(95),r.e(96),r.e(2),r.e(11),r.e(36),r.e(30),r.e(18),r.e(54),r.e(31),r.e(75),r.e(103),r.e(104),r.e(155)]).then(r.bind(null,1653));case S.a.Interaction:return Promise.all([r.e(74),r.e(96),r.e(133),r.e(2),r.e(11),r.e(36),r.e(30),r.e(18),r.e(54),r.e(31),r.e(75),r.e(104),r.e(153)]).then(r.bind(null,1659));case S.a.SubmitAnswer:return Promise.all([r.e(74),r.e(95),r.e(2),r.e(11),r.e(36),r.e(30),r.e(18),r.e(54),r.e(31),r.e(75),r.e(103),r.e(154)]).then(r.bind(null,1661))}}();case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}U=Object(f.a)(U),t.default={byId:Object(P.c)(function(){var e=Object(o.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(t.params.id),e.next=3,J("id",r);case 3:return n=e.sent,e.t0=i.jsx,e.t1=U,e.t2=n,e.next=9,B(n.meta.type);case 9:return e.t3=e.sent,e.t4={idType:"id",problem:e.t2,ProblemTypeEditorComponent:e.t3},e.t5=Object(x.a)(),e.abrupt("return",(0,e.t0)(e.t1,e.t4,e.t5));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),byDisplayId:Object(P.c)(function(){var e=Object(o.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(t.params.displayId),e.next=3,J("displayId",r);case 3:return n=e.sent,e.t0=i.jsx,e.t1=U,e.t2=n,e.next=9,B(n.meta.type);case 9:return e.t3=e.sent,e.t4={idType:"displayId",problem:e.t2,ProblemTypeEditorComponent:e.t3},e.t5=Object(x.a)(),e.abrupt("return",(0,e.t0)(e.t1,e.t4,e.t5));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}]);
//# sourceMappingURL=102.0639fac5.chunk.js.map